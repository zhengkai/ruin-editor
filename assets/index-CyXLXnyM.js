var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJSMin=(cb,mod)=>()=>(mod||cb((mod={exports:{}}).exports,mod),mod.exports),__copyProps=(to,from,except,desc)=>{if(from&&typeof from==`object`||typeof from==`function`)for(var keys=__getOwnPropNames(from),i$1=0,n=keys.length,key;i$1<n;i$1++)key=keys[i$1],!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:(k=>from[k]).bind(null,key),enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to},__toESM=(mod,isNodeMode,target)=>(target=mod==null?{}:__create(__getProtoOf(mod)),__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,`default`,{value:mod,enumerable:!0}):target,mod));(function(){let relList=document.createElement(`link`).relList;if(relList&&relList.supports&&relList.supports(`modulepreload`))return;for(let link of document.querySelectorAll(`link[rel="modulepreload"]`))processPreload(link);new MutationObserver(mutations=>{for(let mutation of mutations)if(mutation.type===`childList`)for(let node of mutation.addedNodes)node.tagName===`LINK`&&node.rel===`modulepreload`&&processPreload(node)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(link){let fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),link.crossOrigin===`use-credentials`?fetchOpts.credentials=`include`:link.crossOrigin===`anonymous`?fetchOpts.credentials=`omit`:fetchOpts.credentials=`same-origin`,fetchOpts}function processPreload(link){if(link.ep)return;link.ep=!0;let fetchOpts=getFetchOpts(link);fetch(link.href,fetchOpts)}})();function htmlNew(tagName,cls){let el=document.createElement(tagName);return cls&&el.classList.add(cls),el}var require_aspromise=__commonJSMin(((exports,module)=>{module.exports=asPromise;function asPromise(fn,ctx){for(var params=Array(arguments.length-1),offset=0,index=2,pending=!0;index<arguments.length;)params[offset++]=arguments[index++];return new Promise(function(resolve,reject){params[offset]=function(err){if(pending)if(pending=!1,err)reject(err);else{for(var params$1=Array(arguments.length-1),offset$1=0;offset$1<params$1.length;)params$1[offset$1++]=arguments[offset$1];resolve.apply(null,params$1)}};try{fn.apply(ctx||null,params)}catch(err){pending&&(pending=!1,reject(err))}})}})),require_base64=__commonJSMin((exports=>{var base64$1=exports;base64$1.length=function(string){var p=string.length;if(!p)return 0;for(var n=0;--p%4>1&&string.charAt(p)===`=`;)++n;return Math.ceil(string.length*3)/4-n};for(var b64=Array(64),s64=Array(123),i=0;i<64;)s64[b64[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;base64$1.encode=function(buffer,start,end){for(var parts=null,chunk=[],i$1=0,j=0,t;start<end;){var b=buffer[start++];switch(j){case 0:chunk[i$1++]=b64[b>>2],t=(b&3)<<4,j=1;break;case 1:chunk[i$1++]=b64[t|b>>4],t=(b&15)<<2,j=2;break;case 2:chunk[i$1++]=b64[t|b>>6],chunk[i$1++]=b64[b&63],j=0;break}i$1>8191&&((parts||=[]).push(String.fromCharCode.apply(String,chunk)),i$1=0)}return j&&(chunk[i$1++]=b64[t],chunk[i$1++]=61,j===1&&(chunk[i$1++]=61)),parts?(i$1&&parts.push(String.fromCharCode.apply(String,chunk.slice(0,i$1))),parts.join(``)):String.fromCharCode.apply(String,chunk.slice(0,i$1))};var invalidEncoding=`invalid encoding`;base64$1.decode=function(string,buffer,offset){for(var start=offset,j=0,t,i$1=0;i$1<string.length;){var c=string.charCodeAt(i$1++);if(c===61&&j>1)break;if((c=s64[c])===void 0)throw Error(invalidEncoding);switch(j){case 0:t=c,j=1;break;case 1:buffer[offset++]=t<<2|(c&48)>>4,t=c,j=2;break;case 2:buffer[offset++]=(t&15)<<4|(c&60)>>2,t=c,j=3;break;case 3:buffer[offset++]=(t&3)<<6|c,j=0;break}}if(j===1)throw Error(invalidEncoding);return offset-start},base64$1.test=function(string){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string)}})),require_eventemitter=__commonJSMin(((exports,module)=>{module.exports=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(evt,fn,ctx){return(this._listeners[evt]||(this._listeners[evt]=[])).push({fn,ctx:ctx||this}),this},EventEmitter.prototype.off=function(evt,fn){if(evt===void 0)this._listeners={};else if(fn===void 0)this._listeners[evt]=[];else for(var listeners=this._listeners[evt],i$1=0;i$1<listeners.length;)listeners[i$1].fn===fn?listeners.splice(i$1,1):++i$1;return this},EventEmitter.prototype.emit=function(evt){var listeners=this._listeners[evt];if(listeners){for(var args=[],i$1=1;i$1<arguments.length;)args.push(arguments[i$1++]);for(i$1=0;i$1<listeners.length;)listeners[i$1].fn.apply(listeners[i$1++].ctx,args)}return this}})),require_float=__commonJSMin(((exports,module)=>{module.exports=factory(factory);function factory(exports$1){return typeof Float32Array<`u`?(function(){var f32=new Float32Array([-0]),f8b=new Uint8Array(f32.buffer),le=f8b[3]===128;function writeFloat_f32_cpy(val,buf,pos){f32[0]=val,buf[pos]=f8b[0],buf[pos+1]=f8b[1],buf[pos+2]=f8b[2],buf[pos+3]=f8b[3]}function writeFloat_f32_rev(val,buf,pos){f32[0]=val,buf[pos]=f8b[3],buf[pos+1]=f8b[2],buf[pos+2]=f8b[1],buf[pos+3]=f8b[0]}exports$1.writeFloatLE=le?writeFloat_f32_cpy:writeFloat_f32_rev,exports$1.writeFloatBE=le?writeFloat_f32_rev:writeFloat_f32_cpy;function readFloat_f32_cpy(buf,pos){return f8b[0]=buf[pos],f8b[1]=buf[pos+1],f8b[2]=buf[pos+2],f8b[3]=buf[pos+3],f32[0]}function readFloat_f32_rev(buf,pos){return f8b[3]=buf[pos],f8b[2]=buf[pos+1],f8b[1]=buf[pos+2],f8b[0]=buf[pos+3],f32[0]}exports$1.readFloatLE=le?readFloat_f32_cpy:readFloat_f32_rev,exports$1.readFloatBE=le?readFloat_f32_rev:readFloat_f32_cpy})():(function(){function writeFloat_ieee754(writeUint,val,buf,pos){var sign=val<0?1:0;if(sign&&(val=-val),val===0)writeUint(1/val>0?0:2147483648,buf,pos);else if(isNaN(val))writeUint(2143289344,buf,pos);else if(val>34028234663852886e22)writeUint((sign<<31|2139095040)>>>0,buf,pos);else if(val<11754943508222875e-54)writeUint((sign<<31|Math.round(val/1401298464324817e-60))>>>0,buf,pos);else{var exponent=Math.floor(Math.log(val)/Math.LN2),mantissa=Math.round(val*2**-exponent*8388608)&8388607;writeUint((sign<<31|exponent+127<<23|mantissa)>>>0,buf,pos)}}exports$1.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE),exports$1.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE);function readFloat_ieee754(readUint,buf,pos){var uint=readUint(buf,pos),sign=(uint>>31)*2+1,exponent=uint>>>23&255,mantissa=uint&8388607;return exponent===255?mantissa?NaN:sign*(1/0):exponent===0?sign*1401298464324817e-60*mantissa:sign*2**(exponent-150)*(mantissa+8388608)}exports$1.readFloatLE=readFloat_ieee754.bind(null,readUintLE),exports$1.readFloatBE=readFloat_ieee754.bind(null,readUintBE)})(),typeof Float64Array<`u`?(function(){var f64=new Float64Array([-0]),f8b=new Uint8Array(f64.buffer),le=f8b[7]===128;function writeDouble_f64_cpy(val,buf,pos){f64[0]=val,buf[pos]=f8b[0],buf[pos+1]=f8b[1],buf[pos+2]=f8b[2],buf[pos+3]=f8b[3],buf[pos+4]=f8b[4],buf[pos+5]=f8b[5],buf[pos+6]=f8b[6],buf[pos+7]=f8b[7]}function writeDouble_f64_rev(val,buf,pos){f64[0]=val,buf[pos]=f8b[7],buf[pos+1]=f8b[6],buf[pos+2]=f8b[5],buf[pos+3]=f8b[4],buf[pos+4]=f8b[3],buf[pos+5]=f8b[2],buf[pos+6]=f8b[1],buf[pos+7]=f8b[0]}exports$1.writeDoubleLE=le?writeDouble_f64_cpy:writeDouble_f64_rev,exports$1.writeDoubleBE=le?writeDouble_f64_rev:writeDouble_f64_cpy;function readDouble_f64_cpy(buf,pos){return f8b[0]=buf[pos],f8b[1]=buf[pos+1],f8b[2]=buf[pos+2],f8b[3]=buf[pos+3],f8b[4]=buf[pos+4],f8b[5]=buf[pos+5],f8b[6]=buf[pos+6],f8b[7]=buf[pos+7],f64[0]}function readDouble_f64_rev(buf,pos){return f8b[7]=buf[pos],f8b[6]=buf[pos+1],f8b[5]=buf[pos+2],f8b[4]=buf[pos+3],f8b[3]=buf[pos+4],f8b[2]=buf[pos+5],f8b[1]=buf[pos+6],f8b[0]=buf[pos+7],f64[0]}exports$1.readDoubleLE=le?readDouble_f64_cpy:readDouble_f64_rev,exports$1.readDoubleBE=le?readDouble_f64_rev:readDouble_f64_cpy})():(function(){function writeDouble_ieee754(writeUint,off0,off1,val,buf,pos){var sign=val<0?1:0;if(sign&&(val=-val),val===0)writeUint(0,buf,pos+off0),writeUint(1/val>0?0:2147483648,buf,pos+off1);else if(isNaN(val))writeUint(0,buf,pos+off0),writeUint(2146959360,buf,pos+off1);else if(val>17976931348623157e292)writeUint(0,buf,pos+off0),writeUint((sign<<31|2146435072)>>>0,buf,pos+off1);else{var mantissa;if(val<22250738585072014e-324)mantissa=val/5e-324,writeUint(mantissa>>>0,buf,pos+off0),writeUint((sign<<31|mantissa/4294967296)>>>0,buf,pos+off1);else{var exponent=Math.floor(Math.log(val)/Math.LN2);exponent===1024&&(exponent=1023),mantissa=val*2**-exponent,writeUint(mantissa*4503599627370496>>>0,buf,pos+off0),writeUint((sign<<31|exponent+1023<<20|mantissa*1048576&1048575)>>>0,buf,pos+off1)}}}exports$1.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4),exports$1.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0);function readDouble_ieee754(readUint,off0,off1,buf,pos){var lo=readUint(buf,pos+off0),hi=readUint(buf,pos+off1),sign=(hi>>31)*2+1,exponent=hi>>>20&2047,mantissa=4294967296*(hi&1048575)+lo;return exponent===2047?mantissa?NaN:sign*(1/0):exponent===0?sign*5e-324*mantissa:sign*2**(exponent-1075)*(mantissa+4503599627370496)}exports$1.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4),exports$1.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)})(),exports$1}function writeUintLE(val,buf,pos){buf[pos]=val&255,buf[pos+1]=val>>>8&255,buf[pos+2]=val>>>16&255,buf[pos+3]=val>>>24}function writeUintBE(val,buf,pos){buf[pos]=val>>>24,buf[pos+1]=val>>>16&255,buf[pos+2]=val>>>8&255,buf[pos+3]=val&255}function readUintLE(buf,pos){return(buf[pos]|buf[pos+1]<<8|buf[pos+2]<<16|buf[pos+3]<<24)>>>0}function readUintBE(buf,pos){return(buf[pos]<<24|buf[pos+1]<<16|buf[pos+2]<<8|buf[pos+3])>>>0}})),require_inquire=__commonJSMin(((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval(`quire`.replace(/^/,`re`))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch{}return null}})),require_utf8=__commonJSMin((exports=>{var utf8$2=exports;utf8$2.length=function(string){for(var len=0,c=0,i$1=0;i$1<string.length;++i$1)c=string.charCodeAt(i$1),c<128?len+=1:c<2048?len+=2:(c&64512)==55296&&(string.charCodeAt(i$1+1)&64512)==56320?(++i$1,len+=4):len+=3;return len},utf8$2.read=function(buffer,start,end){if(end-start<1)return``;for(var parts=null,chunk=[],i$1=0,t;start<end;)t=buffer[start++],t<128?chunk[i$1++]=t:t>191&&t<224?chunk[i$1++]=(t&31)<<6|buffer[start++]&63:t>239&&t<365?(t=((t&7)<<18|(buffer[start++]&63)<<12|(buffer[start++]&63)<<6|buffer[start++]&63)-65536,chunk[i$1++]=55296+(t>>10),chunk[i$1++]=56320+(t&1023)):chunk[i$1++]=(t&15)<<12|(buffer[start++]&63)<<6|buffer[start++]&63,i$1>8191&&((parts||=[]).push(String.fromCharCode.apply(String,chunk)),i$1=0);return parts?(i$1&&parts.push(String.fromCharCode.apply(String,chunk.slice(0,i$1))),parts.join(``)):String.fromCharCode.apply(String,chunk.slice(0,i$1))},utf8$2.write=function(string,buffer,offset){for(var start=offset,c1,c2,i$1=0;i$1<string.length;++i$1)c1=string.charCodeAt(i$1),c1<128?buffer[offset++]=c1:c1<2048?(buffer[offset++]=c1>>6|192,buffer[offset++]=c1&63|128):(c1&64512)==55296&&((c2=string.charCodeAt(i$1+1))&64512)==56320?(c1=65536+((c1&1023)<<10)+(c2&1023),++i$1,buffer[offset++]=c1>>18|240,buffer[offset++]=c1>>12&63|128,buffer[offset++]=c1>>6&63|128,buffer[offset++]=c1&63|128):(buffer[offset++]=c1>>12|224,buffer[offset++]=c1>>6&63|128,buffer[offset++]=c1&63|128);return offset-start}})),require_pool=__commonJSMin(((exports,module)=>{module.exports=pool;function pool(alloc,slice,size){var SIZE=size||8192,MAX=SIZE>>>1,slab=null,offset=SIZE;return function(size$1){if(size$1<1||size$1>MAX)return alloc(size$1);offset+size$1>SIZE&&(slab=alloc(SIZE),offset=0);var buf=slice.call(slab,offset,offset+=size$1);return offset&7&&(offset=(offset|7)+1),buf}}})),require_longbits=__commonJSMin(((exports,module)=>{module.exports=LongBits$2;var util$6=require_minimal$1();function LongBits$2(lo,hi){this.lo=lo>>>0,this.hi=hi>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash=`\0\0\0\0\0\0\0\0`;LongBits$2.fromNumber=function(value){if(value===0)return zero;var sign=value<0;sign&&(value=-value);var lo=value>>>0,hi=(value-lo)/4294967296>>>0;return sign&&(hi=~hi>>>0,lo=~lo>>>0,++lo>4294967295&&(lo=0,++hi>4294967295&&(hi=0))),new LongBits$2(lo,hi)},LongBits$2.from=function(value){if(typeof value==`number`)return LongBits$2.fromNumber(value);if(util$6.isString(value))if(util$6.Long)value=util$6.Long.fromString(value);else return LongBits$2.fromNumber(parseInt(value,10));return value.low||value.high?new LongBits$2(value.low>>>0,value.high>>>0):zero},LongBits$2.prototype.toNumber=function(unsigned){if(!unsigned&&this.hi>>>31){var lo=~this.lo+1>>>0,hi=~this.hi>>>0;return lo||(hi=hi+1>>>0),-(lo+hi*4294967296)}return this.lo+this.hi*4294967296},LongBits$2.prototype.toLong=function(unsigned){return util$6.Long?new util$6.Long(this.lo|0,this.hi|0,!!unsigned):{low:this.lo|0,high:this.hi|0,unsigned:!!unsigned}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function(hash){return hash===zeroHash?zero:new LongBits$2((charCodeAt.call(hash,0)|charCodeAt.call(hash,1)<<8|charCodeAt.call(hash,2)<<16|charCodeAt.call(hash,3)<<24)>>>0,(charCodeAt.call(hash,4)|charCodeAt.call(hash,5)<<8|charCodeAt.call(hash,6)<<16|charCodeAt.call(hash,7)<<24)>>>0)},LongBits$2.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function(){var mask=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^mask)>>>0,this.lo=(this.lo<<1^mask)>>>0,this},LongBits$2.prototype.zzDecode=function(){var mask=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^mask)>>>0,this.hi=(this.hi>>>1^mask)>>>0,this},LongBits$2.prototype.length=function(){var part0=this.lo,part1=(this.lo>>>28|this.hi<<4)>>>0,part2=this.hi>>>24;return part2===0?part1===0?part0<16384?part0<128?1:2:part0<2097152?3:4:part1<16384?part1<128?5:6:part1<2097152?7:8:part2<128?9:10}})),require_minimal$1=__commonJSMin((exports=>{var util$5=exports;util$5.asPromise=require_aspromise(),util$5.base64=require_base64(),util$5.EventEmitter=require_eventemitter(),util$5.float=require_float(),util$5.inquire=require_inquire(),util$5.utf8=require_utf8(),util$5.pool=require_pool(),util$5.LongBits=require_longbits(),util$5.isNode=!!(typeof global<`u`&&global&&global.process&&global.process.versions&&global.process.versions.node),util$5.global=util$5.isNode&&global||typeof window<`u`&&window||typeof self<`u`&&self||exports,util$5.emptyArray=Object.freeze?Object.freeze([]):[],util$5.emptyObject=Object.freeze?Object.freeze({}):{},util$5.isInteger=Number.isInteger||function(value){return typeof value==`number`&&isFinite(value)&&Math.floor(value)===value},util$5.isString=function(value){return typeof value==`string`||value instanceof String},util$5.isObject=function(value){return value&&typeof value==`object`},util$5.isset=util$5.isSet=function(obj,prop){var value=obj[prop];return value!=null&&obj.hasOwnProperty(prop)?typeof value!=`object`||(Array.isArray(value)?value.length:Object.keys(value).length)>0:!1},util$5.Buffer=(function(){try{var Buffer$1=util$5.inquire(`buffer`).Buffer;return Buffer$1.prototype.utf8Write?Buffer$1:null}catch{return null}})(),util$5._Buffer_from=null,util$5._Buffer_allocUnsafe=null,util$5.newBuffer=function(sizeOrArray){return typeof sizeOrArray==`number`?util$5.Buffer?util$5._Buffer_allocUnsafe(sizeOrArray):new util$5.Array(sizeOrArray):util$5.Buffer?util$5._Buffer_from(sizeOrArray):typeof Uint8Array>`u`?sizeOrArray:new Uint8Array(sizeOrArray)},util$5.Array=typeof Uint8Array<`u`?Uint8Array:Array,util$5.Long=util$5.global.dcodeIO&&util$5.global.dcodeIO.Long||util$5.global.Long||util$5.inquire(`long`),util$5.key2Re=/^true|false|0|1$/,util$5.key32Re=/^-?(?:0|[1-9][0-9]*)$/,util$5.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,util$5.longToHash=function(value){return value?util$5.LongBits.from(value).toHash():util$5.LongBits.zeroHash},util$5.longFromHash=function(hash,unsigned){var bits=util$5.LongBits.fromHash(hash);return util$5.Long?util$5.Long.fromBits(bits.lo,bits.hi,unsigned):bits.toNumber(!!unsigned)};function merge(dst,src,ifNotSet){for(var keys=Object.keys(src),i$1=0;i$1<keys.length;++i$1)(dst[keys[i$1]]===void 0||!ifNotSet)&&(dst[keys[i$1]]=src[keys[i$1]]);return dst}util$5.merge=merge,util$5.lcFirst=function(str){return str.charAt(0).toLowerCase()+str.substring(1)};function newError(name){function CustomError(message,properties){if(!(this instanceof CustomError))return new CustomError(message,properties);Object.defineProperty(this,`message`,{get:function(){return message}}),Error.captureStackTrace?Error.captureStackTrace(this,CustomError):Object.defineProperty(this,`stack`,{value:Error().stack||``}),properties&&merge(this,properties)}return CustomError.prototype=Object.create(Error.prototype,{constructor:{value:CustomError,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return name},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+`: `+this.message},writable:!0,enumerable:!1,configurable:!0}}),CustomError}util$5.newError=newError,util$5.ProtocolError=newError(`ProtocolError`),util$5.oneOfGetter=function(fieldNames){for(var fieldMap={},i$1=0;i$1<fieldNames.length;++i$1)fieldMap[fieldNames[i$1]]=1;return function(){for(var keys=Object.keys(this),i$2=keys.length-1;i$2>-1;--i$2)if(fieldMap[keys[i$2]]===1&&this[keys[i$2]]!==void 0&&this[keys[i$2]]!==null)return keys[i$2]}},util$5.oneOfSetter=function(fieldNames){return function(name){for(var i$1=0;i$1<fieldNames.length;++i$1)fieldNames[i$1]!==name&&delete this[fieldNames[i$1]]}},util$5.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},util$5._configure=function(){var Buffer$1=util$5.Buffer;if(!Buffer$1){util$5._Buffer_from=util$5._Buffer_allocUnsafe=null;return}util$5._Buffer_from=Buffer$1.from!==Uint8Array.from&&Buffer$1.from||function(value,encoding){return new Buffer$1(value,encoding)},util$5._Buffer_allocUnsafe=Buffer$1.allocUnsafe||function(size){return new Buffer$1(size)}}})),require_writer=__commonJSMin(((exports,module)=>{module.exports=Writer$1;var util$4=require_minimal$1(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(fn,len,val){this.fn=fn,this.len=len,this.next=void 0,this.val=val}function noop(){}function State(writer){this.head=writer.head,this.tail=writer.tail,this.len=writer.len,this.next=writer.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1(),Writer$1.alloc=function(size){return new util$4.Array(size)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(fn,len,val){return this.tail=this.tail.next=new Op(fn,len,val),this.len+=len,this};function writeByte(val,buf,pos){buf[pos]=val&255}function writeVarint32(val,buf,pos){for(;val>127;)buf[pos++]=val&127|128,val>>>=7;buf[pos]=val}function VarintOp(len,val){this.len=len,this.next=void 0,this.val=val}VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(value){return this.len+=(this.tail=this.tail.next=new VarintOp((value>>>=0)<128?1:value<16384?2:value<2097152?3:value<268435456?4:5,value)).len,this},Writer$1.prototype.int32=function(value){return value<0?this._push(writeVarint64,10,LongBits$1.fromNumber(value)):this.uint32(value)},Writer$1.prototype.sint32=function(value){return this.uint32((value<<1^value>>31)>>>0)};function writeVarint64(val,buf,pos){for(;val.hi;)buf[pos++]=val.lo&127|128,val.lo=(val.lo>>>7|val.hi<<25)>>>0,val.hi>>>=7;for(;val.lo>127;)buf[pos++]=val.lo&127|128,val.lo>>>=7;buf[pos++]=val.lo}Writer$1.prototype.uint64=function(value){var bits=LongBits$1.from(value);return this._push(writeVarint64,bits.length(),bits)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(value){var bits=LongBits$1.from(value).zzEncode();return this._push(writeVarint64,bits.length(),bits)},Writer$1.prototype.bool=function(value){return this._push(writeByte,1,value?1:0)};function writeFixed32(val,buf,pos){buf[pos]=val&255,buf[pos+1]=val>>>8&255,buf[pos+2]=val>>>16&255,buf[pos+3]=val>>>24}Writer$1.prototype.fixed32=function(value){return this._push(writeFixed32,4,value>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(value){var bits=LongBits$1.from(value);return this._push(writeFixed32,4,bits.lo)._push(writeFixed32,4,bits.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(value){return this._push(util$4.float.writeFloatLE,4,value)},Writer$1.prototype.double=function(value){return this._push(util$4.float.writeDoubleLE,8,value)};var writeBytes=util$4.Array.prototype.set?function(val,buf,pos){buf.set(val,pos)}:function(val,buf,pos){for(var i$1=0;i$1<val.length;++i$1)buf[pos+i$1]=val[i$1]};Writer$1.prototype.bytes=function(value){var len=value.length>>>0;if(!len)return this._push(writeByte,1,0);if(util$4.isString(value)){var buf=Writer$1.alloc(len=base64.length(value));base64.decode(value,buf,0),value=buf}return this.uint32(len)._push(writeBytes,len,value)},Writer$1.prototype.string=function(value){var len=utf8$1.length(value);return len?this.uint32(len)._push(utf8$1.write,len,value):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var head=this.head,tail=this.tail,len=this.len;return this.reset().uint32(len),len&&(this.tail.next=head.next,this.tail=tail,this.len+=len),this},Writer$1.prototype.finish=function(){for(var head=this.head.next,buf=this.constructor.alloc(this.len),pos=0;head;)head.fn(head.val,buf,pos),pos+=head.len,head=head.next;return buf},Writer$1._configure=function(BufferWriter_){BufferWriter$1=BufferWriter_,Writer$1.create=create$1(),BufferWriter$1._configure()}})),require_writer_buffer=__commonJSMin(((exports,module)=>{module.exports=BufferWriter;var Writer=require_writer();(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=require_minimal$1();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name===`set`?function(val,buf,pos){buf.set(val,pos)}:function(val,buf,pos){if(val.copy)val.copy(buf,pos,0,val.length);else for(var i$1=0;i$1<val.length;)buf[pos++]=val[i$1++]}},BufferWriter.prototype.bytes=function(value){util$3.isString(value)&&(value=util$3._Buffer_from(value,`base64`));var len=value.length>>>0;return this.uint32(len),len&&this._push(BufferWriter.writeBytesBuffer,len,value),this};function writeStringBuffer(val,buf,pos){val.length<40?util$3.utf8.write(val,buf,pos):buf.utf8Write?buf.utf8Write(val,pos):buf.write(val,pos)}BufferWriter.prototype.string=function(value){var len=util$3.Buffer.byteLength(value);return this.uint32(len),len&&this._push(writeStringBuffer,len,value),this},BufferWriter._configure()})),require_reader=__commonJSMin(((exports,module)=>{module.exports=Reader$1;var util$2=require_minimal$1(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(reader,writeLength){return RangeError(`index out of range: `+reader.pos+` + `+(writeLength||1)+` > `+reader.len)}function Reader$1(buffer){this.buf=buffer,this.pos=0,this.len=buffer.length}var create_array=typeof Uint8Array<`u`?function(buffer){if(buffer instanceof Uint8Array||Array.isArray(buffer))return new Reader$1(buffer);throw Error(`illegal buffer`)}:function(buffer){if(Array.isArray(buffer))return new Reader$1(buffer);throw Error(`illegal buffer`)},create=function(){return util$2.Buffer?function(buffer){return(Reader$1.create=function(buffer$1){return util$2.Buffer.isBuffer(buffer$1)?new BufferReader$1(buffer$1):create_array(buffer$1)})(buffer)}:create_array};Reader$1.create=create(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=(function(){var value=4294967295;return function(){if(value=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(value=(value|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(value=(value|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(value=(value|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(value=(value|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}})(),Reader$1.prototype.int32=function(){return this.uint32()|0},Reader$1.prototype.sint32=function(){var value=this.uint32();return value>>>1^-(value&1)|0};function readLongVarint(){var bits=new LongBits(0,0),i$1=0;if(this.len-this.pos>4){for(;i$1<4;++i$1)if(bits.lo=(bits.lo|(this.buf[this.pos]&127)<<i$1*7)>>>0,this.buf[this.pos++]<128)return bits;if(bits.lo=(bits.lo|(this.buf[this.pos]&127)<<28)>>>0,bits.hi=(bits.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return bits;i$1=0}else{for(;i$1<3;++i$1){if(this.pos>=this.len)throw indexOutOfRange(this);if(bits.lo=(bits.lo|(this.buf[this.pos]&127)<<i$1*7)>>>0,this.buf[this.pos++]<128)return bits}return bits.lo=(bits.lo|(this.buf[this.pos++]&127)<<i$1*7)>>>0,bits}if(this.len-this.pos>4){for(;i$1<5;++i$1)if(bits.hi=(bits.hi|(this.buf[this.pos]&127)<<i$1*7+3)>>>0,this.buf[this.pos++]<128)return bits}else for(;i$1<5;++i$1){if(this.pos>=this.len)throw indexOutOfRange(this);if(bits.hi=(bits.hi|(this.buf[this.pos]&127)<<i$1*7+3)>>>0,this.buf[this.pos++]<128)return bits}throw Error(`invalid varint encoding`)}Reader$1.prototype.bool=function(){return this.uint32()!==0};function readFixed32_end(buf,end){return(buf[end-4]|buf[end-3]<<8|buf[end-2]<<16|buf[end-1]<<24)>>>0}Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var value=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,value},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var value=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,value},Reader$1.prototype.bytes=function(){var length=this.uint32(),start=this.pos,end=this.pos+length;if(end>this.len)throw indexOutOfRange(this,length);if(this.pos+=length,Array.isArray(this.buf))return this.buf.slice(start,end);if(start===end){var nativeBuffer=util$2.Buffer;return nativeBuffer?nativeBuffer.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,start,end)},Reader$1.prototype.string=function(){var bytes=this.bytes();return utf8.read(bytes,0,bytes.length)},Reader$1.prototype.skip=function(length){if(typeof length==`number`){if(this.pos+length>this.len)throw indexOutOfRange(this,length);this.pos+=length}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this},Reader$1.prototype.skipType=function(wireType){switch(wireType){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(wireType=this.uint32()&7)!=4;)this.skipType(wireType);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type `+wireType+` at offset `+this.pos)}return this},Reader$1._configure=function(BufferReader_){BufferReader$1=BufferReader_,Reader$1.create=create(),BufferReader$1._configure();var fn=util$2.Long?`toLong`:`toNumber`;util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[fn](!1)},uint64:function(){return readLongVarint.call(this)[fn](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[fn](!1)},fixed64:function(){return readFixed64.call(this)[fn](!0)},sfixed64:function(){return readFixed64.call(this)[fn](!1)}})}})),require_reader_buffer=__commonJSMin(((exports,module)=>{module.exports=BufferReader;var Reader=require_reader();(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=require_minimal$1();function BufferReader(buffer){Reader.call(this,buffer)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var len=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+len,this.len)):this.buf.toString(`utf-8`,this.pos,this.pos=Math.min(this.pos+len,this.len))},BufferReader._configure()})),require_service=__commonJSMin(((exports,module)=>{module.exports=Service;var util=require_minimal$1();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(rpcImpl,requestDelimited,responseDelimited){if(typeof rpcImpl!=`function`)throw TypeError(`rpcImpl must be a function`);util.EventEmitter.call(this),this.rpcImpl=rpcImpl,this.requestDelimited=!!requestDelimited,this.responseDelimited=!!responseDelimited}Service.prototype.rpcCall=function rpcCall(method,requestCtor,responseCtor,request,callback){if(!request)throw TypeError(`request must be specified`);var self$1=this;if(!callback)return util.asPromise(rpcCall,self$1,method,requestCtor,responseCtor,request);if(!self$1.rpcImpl){setTimeout(function(){callback(Error(`already ended`))},0);return}try{return self$1.rpcImpl(method,requestCtor[self$1.requestDelimited?`encodeDelimited`:`encode`](request).finish(),function(err,response){if(err)return self$1.emit(`error`,err,method),callback(err);if(response===null){self$1.end(!0);return}if(!(response instanceof responseCtor))try{response=responseCtor[self$1.responseDelimited?`decodeDelimited`:`decode`](response)}catch(err$1){return self$1.emit(`error`,err$1,method),callback(err$1)}return self$1.emit(`data`,response,method),callback(null,response)})}catch(err){self$1.emit(`error`,err,method),setTimeout(function(){callback(err)},0);return}},Service.prototype.end=function(endedByRPC){return this.rpcImpl&&(endedByRPC||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit(`end`).off()),this}})),require_rpc=__commonJSMin((exports=>{var rpc=exports;rpc.Service=require_service()})),require_roots=__commonJSMin(((exports,module)=>{module.exports={}})),require_index_minimal=__commonJSMin((exports=>{var protobuf=exports;protobuf.build=`minimal`,protobuf.Writer=require_writer(),protobuf.BufferWriter=require_writer_buffer(),protobuf.Reader=require_reader(),protobuf.BufferReader=require_reader_buffer(),protobuf.util=require_minimal$1(),protobuf.rpc=require_rpc(),protobuf.roots=require_roots(),protobuf.configure=configure;function configure(){protobuf.util._configure(),protobuf.Writer._configure(protobuf.BufferWriter),protobuf.Reader._configure(protobuf.BufferReader)}configure()})),require_minimal=__commonJSMin(((exports,module)=>{module.exports=require_index_minimal()})),import_minimal=__toESM(require_minimal(),1),$Reader=import_minimal.Reader,$Writer=import_minimal.Writer,$util=import_minimal.util,$root=import_minimal.roots.default||(import_minimal.roots.default={});const pb=$root.pb=(()=>{let pb$1={};return pb$1.TilesetSize=(function(){function TilesetSize(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return TilesetSize.prototype.w=0,TilesetSize.prototype.h=0,TilesetSize.create=function(properties){return new TilesetSize(properties)},TilesetSize.encode=function(message,writer){return writer||=$Writer.create(),message.w!=null&&Object.hasOwnProperty.call(message,`w`)&&writer.uint32(8).uint32(message.w),message.h!=null&&Object.hasOwnProperty.call(message,`h`)&&writer.uint32(16).uint32(message.h),writer},TilesetSize.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},TilesetSize.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.TilesetSize;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.w=reader.uint32();break;case 2:message.h=reader.uint32();break;default:reader.skipType(tag&7);break}}return message},TilesetSize.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},TilesetSize.verify=function(message){return typeof message!=`object`||!message?`object expected`:message.w!=null&&message.hasOwnProperty(`w`)&&!$util.isInteger(message.w)?`w: integer expected`:message.h!=null&&message.hasOwnProperty(`h`)&&!$util.isInteger(message.h)?`h: integer expected`:null},TilesetSize.fromObject=function(object){if(object instanceof $root.pb.TilesetSize)return object;let message=new $root.pb.TilesetSize;return object.w!=null&&(message.w=object.w>>>0),object.h!=null&&(message.h=object.h>>>0),message},TilesetSize.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.w=0,object.h=0),message.w!=null&&message.hasOwnProperty(`w`)&&(object.w=message.w),message.h!=null&&message.hasOwnProperty(`h`)&&(object.h=message.h),object},TilesetSize.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},TilesetSize.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.TilesetSize`},TilesetSize})(),pb$1.Tileset=(function(){function Tileset(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Tileset.prototype.name=0,Tileset.prototype.path=``,Tileset.prototype.size=null,Tileset.create=function(properties){return new Tileset(properties)},Tileset.encode=function(message,writer){return writer||=$Writer.create(),message.name!=null&&Object.hasOwnProperty.call(message,`name`)&&writer.uint32(8).int32(message.name),message.path!=null&&Object.hasOwnProperty.call(message,`path`)&&writer.uint32(18).string(message.path),message.size!=null&&Object.hasOwnProperty.call(message,`size`)&&$root.pb.TilesetSize.encode(message.size,writer.uint32(26).fork()).ldelim(),writer},Tileset.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Tileset.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Tileset;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.name=reader.int32();break;case 2:message.path=reader.string();break;case 3:message.size=$root.pb.TilesetSize.decode(reader,reader.uint32());break;default:reader.skipType(tag&7);break}}return message},Tileset.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Tileset.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.name!=null&&message.hasOwnProperty(`name`))switch(message.name){default:return`name: enum value expected`;case 0:case 1:case 2:break}if(message.path!=null&&message.hasOwnProperty(`path`)&&!$util.isString(message.path))return`path: string expected`;if(message.size!=null&&message.hasOwnProperty(`size`)){let error=$root.pb.TilesetSize.verify(message.size);if(error)return`size.`+error}return null},Tileset.fromObject=function(object){if(object instanceof $root.pb.Tileset)return object;let message=new $root.pb.Tileset;switch(object.name){default:if(typeof object.name==`number`){message.name=object.name;break}break;case`unknown`:case 0:message.name=0;break;case`grassland`:case 1:message.name=1;break;case`iron`:case 2:message.name=2;break}if(object.path!=null&&(message.path=String(object.path)),object.size!=null){if(typeof object.size!=`object`)throw TypeError(`.pb.Tileset.size: object expected`);message.size=$root.pb.TilesetSize.fromObject(object.size)}return message},Tileset.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.name=options.enums===String?`unknown`:0,object.path=``,object.size=null),message.name!=null&&message.hasOwnProperty(`name`)&&(object.name=options.enums===String?$root.pb.Tileset.Name[message.name]===void 0?message.name:$root.pb.Tileset.Name[message.name]:message.name),message.path!=null&&message.hasOwnProperty(`path`)&&(object.path=message.path),message.size!=null&&message.hasOwnProperty(`size`)&&(object.size=$root.pb.TilesetSize.toObject(message.size,options)),object},Tileset.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Tileset.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Tileset`},Tileset.Name=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknown`]=0,values[valuesById[1]=`grassland`]=1,values[valuesById[2]=`iron`]=2,values})(),Tileset})(),pb$1.Size=(function(){function Size(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Size.prototype.w=0,Size.prototype.h=0,Size.create=function(properties){return new Size(properties)},Size.encode=function(message,writer){return writer||=$Writer.create(),message.w!=null&&Object.hasOwnProperty.call(message,`w`)&&writer.uint32(13).float(message.w),message.h!=null&&Object.hasOwnProperty.call(message,`h`)&&writer.uint32(21).float(message.h),writer},Size.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Size.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Size;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.w=reader.float();break;case 2:message.h=reader.float();break;default:reader.skipType(tag&7);break}}return message},Size.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Size.verify=function(message){return typeof message!=`object`||!message?`object expected`:message.w!=null&&message.hasOwnProperty(`w`)&&typeof message.w!=`number`?`w: number expected`:message.h!=null&&message.hasOwnProperty(`h`)&&typeof message.h!=`number`?`h: number expected`:null},Size.fromObject=function(object){if(object instanceof $root.pb.Size)return object;let message=new $root.pb.Size;return object.w!=null&&(message.w=Number(object.w)),object.h!=null&&(message.h=Number(object.h)),message},Size.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.w=0,object.h=0),message.w!=null&&message.hasOwnProperty(`w`)&&(object.w=options.json&&!isFinite(message.w)?String(message.w):message.w),message.h!=null&&message.hasOwnProperty(`h`)&&(object.h=options.json&&!isFinite(message.h)?String(message.h):message.h),object},Size.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Size.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Size`},Size})(),pb$1.VisualSize=(function(){function VisualSize(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return VisualSize.prototype.w=0,VisualSize.prototype.h=0,VisualSize.prototype.offsetY=0,VisualSize.create=function(properties){return new VisualSize(properties)},VisualSize.encode=function(message,writer){return writer||=$Writer.create(),message.w!=null&&Object.hasOwnProperty.call(message,`w`)&&writer.uint32(13).float(message.w),message.h!=null&&Object.hasOwnProperty.call(message,`h`)&&writer.uint32(21).float(message.h),message.offsetY!=null&&Object.hasOwnProperty.call(message,`offsetY`)&&writer.uint32(29).float(message.offsetY),writer},VisualSize.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},VisualSize.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.VisualSize;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.w=reader.float();break;case 2:message.h=reader.float();break;case 3:message.offsetY=reader.float();break;default:reader.skipType(tag&7);break}}return message},VisualSize.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},VisualSize.verify=function(message){return typeof message!=`object`||!message?`object expected`:message.w!=null&&message.hasOwnProperty(`w`)&&typeof message.w!=`number`?`w: number expected`:message.h!=null&&message.hasOwnProperty(`h`)&&typeof message.h!=`number`?`h: number expected`:message.offsetY!=null&&message.hasOwnProperty(`offsetY`)&&typeof message.offsetY!=`number`?`offsetY: number expected`:null},VisualSize.fromObject=function(object){if(object instanceof $root.pb.VisualSize)return object;let message=new $root.pb.VisualSize;return object.w!=null&&(message.w=Number(object.w)),object.h!=null&&(message.h=Number(object.h)),object.offsetY!=null&&(message.offsetY=Number(object.offsetY)),message},VisualSize.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.w=0,object.h=0,object.offsetY=0),message.w!=null&&message.hasOwnProperty(`w`)&&(object.w=options.json&&!isFinite(message.w)?String(message.w):message.w),message.h!=null&&message.hasOwnProperty(`h`)&&(object.h=options.json&&!isFinite(message.h)?String(message.h):message.h),message.offsetY!=null&&message.hasOwnProperty(`offsetY`)&&(object.offsetY=options.json&&!isFinite(message.offsetY)?String(message.offsetY):message.offsetY),object},VisualSize.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},VisualSize.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.VisualSize`},VisualSize})(),pb$1.Config=(function(){function Config(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Config.prototype.playerSprite=``,Config.prototype.zoneStart=null,Config.create=function(properties){return new Config(properties)},Config.encode=function(message,writer){return writer||=$Writer.create(),message.playerSprite!=null&&Object.hasOwnProperty.call(message,`playerSprite`)&&writer.uint32(10).string(message.playerSprite),message.zoneStart!=null&&Object.hasOwnProperty.call(message,`zoneStart`)&&$root.pb.MapTriggerGate.encode(message.zoneStart,writer.uint32(18).fork()).ldelim(),writer},Config.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Config.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Config;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.playerSprite=reader.string();break;case 2:message.zoneStart=$root.pb.MapTriggerGate.decode(reader,reader.uint32());break;default:reader.skipType(tag&7);break}}return message},Config.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Config.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.playerSprite!=null&&message.hasOwnProperty(`playerSprite`)&&!$util.isString(message.playerSprite))return`playerSprite: string expected`;if(message.zoneStart!=null&&message.hasOwnProperty(`zoneStart`)){let error=$root.pb.MapTriggerGate.verify(message.zoneStart);if(error)return`zoneStart.`+error}return null},Config.fromObject=function(object){if(object instanceof $root.pb.Config)return object;let message=new $root.pb.Config;if(object.playerSprite!=null&&(message.playerSprite=String(object.playerSprite)),object.zoneStart!=null){if(typeof object.zoneStart!=`object`)throw TypeError(`.pb.Config.zoneStart: object expected`);message.zoneStart=$root.pb.MapTriggerGate.fromObject(object.zoneStart)}return message},Config.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.playerSprite=``,object.zoneStart=null),message.playerSprite!=null&&message.hasOwnProperty(`playerSprite`)&&(object.playerSprite=message.playerSprite),message.zoneStart!=null&&message.hasOwnProperty(`zoneStart`)&&(object.zoneStart=$root.pb.MapTriggerGate.toObject(message.zoneStart,options)),object},Config.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Config.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Config`},Config})(),pb$1.MapCellTile=(function(){function MapCellTile(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return MapCellTile.prototype.name=0,MapCellTile.prototype.id=0,MapCellTile.create=function(properties){return new MapCellTile(properties)},MapCellTile.encode=function(message,writer){return writer||=$Writer.create(),message.name!=null&&Object.hasOwnProperty.call(message,`name`)&&writer.uint32(8).int32(message.name),message.id!=null&&Object.hasOwnProperty.call(message,`id`)&&writer.uint32(16).uint32(message.id),writer},MapCellTile.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},MapCellTile.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.MapCellTile;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.name=reader.int32();break;case 2:message.id=reader.uint32();break;default:reader.skipType(tag&7);break}}return message},MapCellTile.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},MapCellTile.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.name!=null&&message.hasOwnProperty(`name`))switch(message.name){default:return`name: enum value expected`;case 0:case 1:case 2:break}return message.id!=null&&message.hasOwnProperty(`id`)&&!$util.isInteger(message.id)?`id: integer expected`:null},MapCellTile.fromObject=function(object){if(object instanceof $root.pb.MapCellTile)return object;let message=new $root.pb.MapCellTile;switch(object.name){default:if(typeof object.name==`number`){message.name=object.name;break}break;case`unknown`:case 0:message.name=0;break;case`grassland`:case 1:message.name=1;break;case`iron`:case 2:message.name=2;break}return object.id!=null&&(message.id=object.id>>>0),message},MapCellTile.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.name=options.enums===String?`unknown`:0,object.id=0),message.name!=null&&message.hasOwnProperty(`name`)&&(object.name=options.enums===String?$root.pb.Tileset.Name[message.name]===void 0?message.name:$root.pb.Tileset.Name[message.name]:message.name),message.id!=null&&message.hasOwnProperty(`id`)&&(object.id=message.id),object},MapCellTile.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},MapCellTile.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.MapCellTile`},MapCellTile})(),pb$1.MapCell=(function(){function MapCell(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return MapCell.prototype.id=0,MapCell.prototype.tile=null,MapCell.create=function(properties){return new MapCell(properties)},MapCell.encode=function(message,writer){return writer||=$Writer.create(),message.id!=null&&Object.hasOwnProperty.call(message,`id`)&&writer.uint32(8).uint32(message.id),message.tile!=null&&Object.hasOwnProperty.call(message,`tile`)&&$root.pb.MapCellTile.encode(message.tile,writer.uint32(18).fork()).ldelim(),writer},MapCell.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},MapCell.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.MapCell;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.id=reader.uint32();break;case 2:message.tile=$root.pb.MapCellTile.decode(reader,reader.uint32());break;default:reader.skipType(tag&7);break}}return message},MapCell.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},MapCell.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.id!=null&&message.hasOwnProperty(`id`)&&!$util.isInteger(message.id))return`id: integer expected`;if(message.tile!=null&&message.hasOwnProperty(`tile`)){let error=$root.pb.MapCellTile.verify(message.tile);if(error)return`tile.`+error}return null},MapCell.fromObject=function(object){if(object instanceof $root.pb.MapCell)return object;let message=new $root.pb.MapCell;if(object.id!=null&&(message.id=object.id>>>0),object.tile!=null){if(typeof object.tile!=`object`)throw TypeError(`.pb.MapCell.tile: object expected`);message.tile=$root.pb.MapCellTile.fromObject(object.tile)}return message},MapCell.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.id=0,object.tile=null),message.id!=null&&message.hasOwnProperty(`id`)&&(object.id=message.id),message.tile!=null&&message.hasOwnProperty(`tile`)&&(object.tile=$root.pb.MapCellTile.toObject(message.tile,options)),object},MapCell.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},MapCell.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.MapCell`},MapCell})(),pb$1.MapTrigger=(function(){function MapTrigger(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}MapTrigger.prototype.id=0,MapTrigger.prototype.gate=null,MapTrigger.prototype.exit=null,MapTrigger.prototype.water=null;let $oneOfFields;return Object.defineProperty(MapTrigger.prototype,`trigger`,{get:$util.oneOfGetter($oneOfFields=[`gate`,`exit`,`water`]),set:$util.oneOfSetter($oneOfFields)}),MapTrigger.create=function(properties){return new MapTrigger(properties)},MapTrigger.encode=function(message,writer){return writer||=$Writer.create(),message.id!=null&&Object.hasOwnProperty.call(message,`id`)&&writer.uint32(8).uint32(message.id),message.gate!=null&&Object.hasOwnProperty.call(message,`gate`)&&$root.pb.MapTriggerGate.encode(message.gate,writer.uint32(18).fork()).ldelim(),message.exit!=null&&Object.hasOwnProperty.call(message,`exit`)&&$root.pb.MapTriggerGate.encode(message.exit,writer.uint32(26).fork()).ldelim(),message.water!=null&&Object.hasOwnProperty.call(message,`water`)&&$root.pb.MapTriggerWater.encode(message.water,writer.uint32(34).fork()).ldelim(),writer},MapTrigger.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},MapTrigger.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.MapTrigger;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.id=reader.uint32();break;case 2:message.gate=$root.pb.MapTriggerGate.decode(reader,reader.uint32());break;case 3:message.exit=$root.pb.MapTriggerGate.decode(reader,reader.uint32());break;case 4:message.water=$root.pb.MapTriggerWater.decode(reader,reader.uint32());break;default:reader.skipType(tag&7);break}}return message},MapTrigger.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},MapTrigger.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;let properties={};if(message.id!=null&&message.hasOwnProperty(`id`)&&!$util.isInteger(message.id))return`id: integer expected`;if(message.gate!=null&&message.hasOwnProperty(`gate`)){properties.trigger=1;{let error=$root.pb.MapTriggerGate.verify(message.gate);if(error)return`gate.`+error}}if(message.exit!=null&&message.hasOwnProperty(`exit`)){if(properties.trigger===1)return`trigger: multiple values`;properties.trigger=1;{let error=$root.pb.MapTriggerGate.verify(message.exit);if(error)return`exit.`+error}}if(message.water!=null&&message.hasOwnProperty(`water`)){if(properties.trigger===1)return`trigger: multiple values`;properties.trigger=1;{let error=$root.pb.MapTriggerWater.verify(message.water);if(error)return`water.`+error}}return null},MapTrigger.fromObject=function(object){if(object instanceof $root.pb.MapTrigger)return object;let message=new $root.pb.MapTrigger;if(object.id!=null&&(message.id=object.id>>>0),object.gate!=null){if(typeof object.gate!=`object`)throw TypeError(`.pb.MapTrigger.gate: object expected`);message.gate=$root.pb.MapTriggerGate.fromObject(object.gate)}if(object.exit!=null){if(typeof object.exit!=`object`)throw TypeError(`.pb.MapTrigger.exit: object expected`);message.exit=$root.pb.MapTriggerGate.fromObject(object.exit)}if(object.water!=null){if(typeof object.water!=`object`)throw TypeError(`.pb.MapTrigger.water: object expected`);message.water=$root.pb.MapTriggerWater.fromObject(object.water)}return message},MapTrigger.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.id=0),message.id!=null&&message.hasOwnProperty(`id`)&&(object.id=message.id),message.gate!=null&&message.hasOwnProperty(`gate`)&&(object.gate=$root.pb.MapTriggerGate.toObject(message.gate,options),options.oneofs&&(object.trigger=`gate`)),message.exit!=null&&message.hasOwnProperty(`exit`)&&(object.exit=$root.pb.MapTriggerGate.toObject(message.exit,options),options.oneofs&&(object.trigger=`exit`)),message.water!=null&&message.hasOwnProperty(`water`)&&(object.water=$root.pb.MapTriggerWater.toObject(message.water,options),options.oneofs&&(object.trigger=`water`)),object},MapTrigger.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},MapTrigger.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.MapTrigger`},MapTrigger})(),pb$1.MapTriggerGate=(function(){function MapTriggerGate(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return MapTriggerGate.prototype.zone=0,MapTriggerGate.prototype.x=0,MapTriggerGate.prototype.y=0,MapTriggerGate.create=function(properties){return new MapTriggerGate(properties)},MapTriggerGate.encode=function(message,writer){return writer||=$Writer.create(),message.zone!=null&&Object.hasOwnProperty.call(message,`zone`)&&writer.uint32(8).int32(message.zone),message.x!=null&&Object.hasOwnProperty.call(message,`x`)&&writer.uint32(21).float(message.x),message.y!=null&&Object.hasOwnProperty.call(message,`y`)&&writer.uint32(29).float(message.y),writer},MapTriggerGate.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},MapTriggerGate.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.MapTriggerGate;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.zone=reader.int32();break;case 2:message.x=reader.float();break;case 3:message.y=reader.float();break;default:reader.skipType(tag&7);break}}return message},MapTriggerGate.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},MapTriggerGate.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.zone!=null&&message.hasOwnProperty(`zone`))switch(message.zone){default:return`zone: enum value expected`;case 0:case 2:case 3:case 4:break}return message.x!=null&&message.hasOwnProperty(`x`)&&typeof message.x!=`number`?`x: number expected`:message.y!=null&&message.hasOwnProperty(`y`)&&typeof message.y!=`number`?`y: number expected`:null},MapTriggerGate.fromObject=function(object){if(object instanceof $root.pb.MapTriggerGate)return object;let message=new $root.pb.MapTriggerGate;switch(object.zone){default:if(typeof object.zone==`number`){message.zone=object.zone;break}break;case`unknown`:case 0:message.zone=0;break;case`zone2`:case 2:message.zone=2;break;case`zone3`:case 3:message.zone=3;break;case`zoneWell`:case 4:message.zone=4;break}return object.x!=null&&(message.x=Number(object.x)),object.y!=null&&(message.y=Number(object.y)),message},MapTriggerGate.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.zone=options.enums===String?`unknown`:0,object.x=0,object.y=0),message.zone!=null&&message.hasOwnProperty(`zone`)&&(object.zone=options.enums===String?$root.pb.Zone.Name[message.zone]===void 0?message.zone:$root.pb.Zone.Name[message.zone]:message.zone),message.x!=null&&message.hasOwnProperty(`x`)&&(object.x=options.json&&!isFinite(message.x)?String(message.x):message.x),message.y!=null&&message.hasOwnProperty(`y`)&&(object.y=options.json&&!isFinite(message.y)?String(message.y):message.y),object},MapTriggerGate.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},MapTriggerGate.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.MapTriggerGate`},MapTriggerGate})(),pb$1.MapTriggerWater=(function(){function MapTriggerWater(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return MapTriggerWater.prototype.drag=0,MapTriggerWater.create=function(properties){return new MapTriggerWater(properties)},MapTriggerWater.encode=function(message,writer){return writer||=$Writer.create(),message.drag!=null&&Object.hasOwnProperty.call(message,`drag`)&&writer.uint32(13).float(message.drag),writer},MapTriggerWater.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},MapTriggerWater.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.MapTriggerWater;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.drag=reader.float();break;default:reader.skipType(tag&7);break}}return message},MapTriggerWater.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},MapTriggerWater.verify=function(message){return typeof message!=`object`||!message?`object expected`:message.drag!=null&&message.hasOwnProperty(`drag`)&&typeof message.drag!=`number`?`drag: number expected`:null},MapTriggerWater.fromObject=function(object){if(object instanceof $root.pb.MapTriggerWater)return object;let message=new $root.pb.MapTriggerWater;return object.drag!=null&&(message.drag=Number(object.drag)),message},MapTriggerWater.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.drag=0),message.drag!=null&&message.hasOwnProperty(`drag`)&&(object.drag=options.json&&!isFinite(message.drag)?String(message.drag):message.drag),object},MapTriggerWater.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},MapTriggerWater.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.MapTriggerWater`},MapTriggerWater})(),pb$1.MapMob=(function(){function MapMob(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return MapMob.prototype.type=0,MapMob.prototype.sprite=0,MapMob.prototype.x=0,MapMob.prototype.y=0,MapMob.prototype.scale=0,MapMob.create=function(properties){return new MapMob(properties)},MapMob.encode=function(message,writer){return writer||=$Writer.create(),message.type!=null&&Object.hasOwnProperty.call(message,`type`)&&writer.uint32(8).int32(message.type),message.x!=null&&Object.hasOwnProperty.call(message,`x`)&&writer.uint32(21).float(message.x),message.y!=null&&Object.hasOwnProperty.call(message,`y`)&&writer.uint32(29).float(message.y),message.scale!=null&&Object.hasOwnProperty.call(message,`scale`)&&writer.uint32(37).float(message.scale),message.sprite!=null&&Object.hasOwnProperty.call(message,`sprite`)&&writer.uint32(40).int32(message.sprite),writer},MapMob.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},MapMob.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.MapMob;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.type=reader.int32();break;case 5:message.sprite=reader.int32();break;case 2:message.x=reader.float();break;case 3:message.y=reader.float();break;case 4:message.scale=reader.float();break;default:reader.skipType(tag&7);break}}return message},MapMob.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},MapMob.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.type!=null&&message.hasOwnProperty(`type`))switch(message.type){default:return`type: enum value expected`;case 0:case 1:case 2:break}if(message.sprite!=null&&message.hasOwnProperty(`sprite`))switch(message.sprite){default:return`sprite: enum value expected`;case 0:case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 2001:case 2002:case 2003:break}return message.x!=null&&message.hasOwnProperty(`x`)&&typeof message.x!=`number`?`x: number expected`:message.y!=null&&message.hasOwnProperty(`y`)&&typeof message.y!=`number`?`y: number expected`:message.scale!=null&&message.hasOwnProperty(`scale`)&&typeof message.scale!=`number`?`scale: number expected`:null},MapMob.fromObject=function(object){if(object instanceof $root.pb.MapMob)return object;let message=new $root.pb.MapMob;switch(object.type){default:if(typeof object.type==`number`){message.type=object.type;break}break;case`unknownMob`:case 0:message.type=0;break;case`dog`:case 1:message.type=1;break;case`bird`:case 2:message.type=2;break}switch(object.sprite){default:if(typeof object.sprite==`number`){message.sprite=object.sprite;break}break;case`unknown`:case 0:message.sprite=0;break;case`birdA`:case 1001:message.sprite=1001;break;case`birdB`:case 1002:message.sprite=1002;break;case`dogA`:case 1003:message.sprite=1003;break;case`dogB`:case 1004:message.sprite=1004;break;case`catA`:case 1005:message.sprite=1005;break;case`catB`:case 1006:message.sprite=1006;break;case`ratA`:case 1007:message.sprite=1007;break;case`ratB`:case 1008:message.sprite=1008;break;case`fighter`:case 2001:message.sprite=2001;break;case`samurai`:case 2002:message.sprite=2002;break;case`shinobi`:case 2003:message.sprite=2003;break}return object.x!=null&&(message.x=Number(object.x)),object.y!=null&&(message.y=Number(object.y)),object.scale!=null&&(message.scale=Number(object.scale)),message},MapMob.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.type=options.enums===String?`unknownMob`:0,object.x=0,object.y=0,object.scale=0,object.sprite=options.enums===String?`unknown`:0),message.type!=null&&message.hasOwnProperty(`type`)&&(object.type=options.enums===String?$root.pb.Mob.Type[message.type]===void 0?message.type:$root.pb.Mob.Type[message.type]:message.type),message.x!=null&&message.hasOwnProperty(`x`)&&(object.x=options.json&&!isFinite(message.x)?String(message.x):message.x),message.y!=null&&message.hasOwnProperty(`y`)&&(object.y=options.json&&!isFinite(message.y)?String(message.y):message.y),message.scale!=null&&message.hasOwnProperty(`scale`)&&(object.scale=options.json&&!isFinite(message.scale)?String(message.scale):message.scale),message.sprite!=null&&message.hasOwnProperty(`sprite`)&&(object.sprite=options.enums===String?$root.pb.SpriteBox.Name[message.sprite]===void 0?message.sprite:$root.pb.SpriteBox.Name[message.sprite]:message.sprite),object},MapMob.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},MapMob.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.MapMob`},MapMob})(),pb$1.Map=(function(){function Map$1(properties){if(this.terrain=[],properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Map$1.prototype.name=0,Map$1.prototype.w=0,Map$1.prototype.h=0,Map$1.prototype.terrain=$util.emptyArray,Map$1.create=function(properties){return new Map$1(properties)},Map$1.encode=function(message,writer){if(writer||=$Writer.create(),message.name!=null&&Object.hasOwnProperty.call(message,`name`)&&writer.uint32(8).int32(message.name),message.w!=null&&Object.hasOwnProperty.call(message,`w`)&&writer.uint32(16).uint32(message.w),message.h!=null&&Object.hasOwnProperty.call(message,`h`)&&writer.uint32(24).uint32(message.h),message.terrain!=null&&message.terrain.length)for(let i$1=0;i$1<message.terrain.length;++i$1)$root.pb.MapCell.encode(message.terrain[i$1],writer.uint32(34).fork()).ldelim();return writer},Map$1.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Map$1.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Map;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.name=reader.int32();break;case 2:message.w=reader.uint32();break;case 3:message.h=reader.uint32();break;case 4:message.terrain&&message.terrain.length||(message.terrain=[]),message.terrain.push($root.pb.MapCell.decode(reader,reader.uint32()));break;default:reader.skipType(tag&7);break}}return message},Map$1.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Map$1.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.name!=null&&message.hasOwnProperty(`name`))switch(message.name){default:return`name: enum value expected`;case 0:case 2:case 3:case 4:break}if(message.w!=null&&message.hasOwnProperty(`w`)&&!$util.isInteger(message.w))return`w: integer expected`;if(message.h!=null&&message.hasOwnProperty(`h`)&&!$util.isInteger(message.h))return`h: integer expected`;if(message.terrain!=null&&message.hasOwnProperty(`terrain`)){if(!Array.isArray(message.terrain))return`terrain: array expected`;for(let i$1=0;i$1<message.terrain.length;++i$1){let error=$root.pb.MapCell.verify(message.terrain[i$1]);if(error)return`terrain.`+error}}return null},Map$1.fromObject=function(object){if(object instanceof $root.pb.Map)return object;let message=new $root.pb.Map;switch(object.name){default:if(typeof object.name==`number`){message.name=object.name;break}break;case`unknown`:case 0:message.name=0;break;case`map2`:case 2:message.name=2;break;case`map3`:case 3:message.name=3;break;case`mapWell`:case 4:message.name=4;break}if(object.w!=null&&(message.w=object.w>>>0),object.h!=null&&(message.h=object.h>>>0),object.terrain){if(!Array.isArray(object.terrain))throw TypeError(`.pb.Map.terrain: array expected`);message.terrain=[];for(let i$1=0;i$1<object.terrain.length;++i$1){if(typeof object.terrain[i$1]!=`object`)throw TypeError(`.pb.Map.terrain: object expected`);message.terrain[i$1]=$root.pb.MapCell.fromObject(object.terrain[i$1])}}return message},Map$1.toObject=function(message,options){options||={};let object={};if((options.arrays||options.defaults)&&(object.terrain=[]),options.defaults&&(object.name=options.enums===String?`unknown`:0,object.w=0,object.h=0),message.name!=null&&message.hasOwnProperty(`name`)&&(object.name=options.enums===String?$root.pb.Map.Name[message.name]===void 0?message.name:$root.pb.Map.Name[message.name]:message.name),message.w!=null&&message.hasOwnProperty(`w`)&&(object.w=message.w),message.h!=null&&message.hasOwnProperty(`h`)&&(object.h=message.h),message.terrain&&message.terrain.length){object.terrain=[];for(let j=0;j<message.terrain.length;++j)object.terrain[j]=$root.pb.MapCell.toObject(message.terrain[j],options)}return object},Map$1.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Map$1.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Map`},Map$1.Name=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknown`]=0,values[valuesById[2]=`map2`]=2,values[valuesById[3]=`map3`]=3,values[valuesById[4]=`mapWell`]=4,values})(),Map$1})(),pb$1.ZoneBackgroundTile=(function(){function ZoneBackgroundTile(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return ZoneBackgroundTile.prototype.loopCnt=0,ZoneBackgroundTile.create=function(properties){return new ZoneBackgroundTile(properties)},ZoneBackgroundTile.encode=function(message,writer){return writer||=$Writer.create(),message.loopCnt!=null&&Object.hasOwnProperty.call(message,`loopCnt`)&&writer.uint32(13).float(message.loopCnt),writer},ZoneBackgroundTile.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},ZoneBackgroundTile.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.ZoneBackgroundTile;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.loopCnt=reader.float();break;default:reader.skipType(tag&7);break}}return message},ZoneBackgroundTile.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},ZoneBackgroundTile.verify=function(message){return typeof message!=`object`||!message?`object expected`:message.loopCnt!=null&&message.hasOwnProperty(`loopCnt`)&&typeof message.loopCnt!=`number`?`loopCnt: number expected`:null},ZoneBackgroundTile.fromObject=function(object){if(object instanceof $root.pb.ZoneBackgroundTile)return object;let message=new $root.pb.ZoneBackgroundTile;return object.loopCnt!=null&&(message.loopCnt=Number(object.loopCnt)),message},ZoneBackgroundTile.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.loopCnt=0),message.loopCnt!=null&&message.hasOwnProperty(`loopCnt`)&&(object.loopCnt=options.json&&!isFinite(message.loopCnt)?String(message.loopCnt):message.loopCnt),object},ZoneBackgroundTile.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},ZoneBackgroundTile.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.ZoneBackgroundTile`},ZoneBackgroundTile})(),pb$1.ZoneBackground=(function(){function ZoneBackground(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}ZoneBackground.prototype.index=0,ZoneBackground.prototype.path=``,ZoneBackground.prototype.tile=null;let $oneOfFields;return Object.defineProperty(ZoneBackground.prototype,`type`,{get:$util.oneOfGetter($oneOfFields=[`tile`]),set:$util.oneOfSetter($oneOfFields)}),ZoneBackground.create=function(properties){return new ZoneBackground(properties)},ZoneBackground.encode=function(message,writer){return writer||=$Writer.create(),message.index!=null&&Object.hasOwnProperty.call(message,`index`)&&writer.uint32(8).uint32(message.index),message.path!=null&&Object.hasOwnProperty.call(message,`path`)&&writer.uint32(18).string(message.path),message.tile!=null&&Object.hasOwnProperty.call(message,`tile`)&&$root.pb.ZoneBackgroundTile.encode(message.tile,writer.uint32(26).fork()).ldelim(),writer},ZoneBackground.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},ZoneBackground.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.ZoneBackground;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.index=reader.uint32();break;case 2:message.path=reader.string();break;case 3:message.tile=$root.pb.ZoneBackgroundTile.decode(reader,reader.uint32());break;default:reader.skipType(tag&7);break}}return message},ZoneBackground.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},ZoneBackground.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;let properties={};if(message.index!=null&&message.hasOwnProperty(`index`)&&!$util.isInteger(message.index))return`index: integer expected`;if(message.path!=null&&message.hasOwnProperty(`path`)&&!$util.isString(message.path))return`path: string expected`;if(message.tile!=null&&message.hasOwnProperty(`tile`)){properties.type=1;{let error=$root.pb.ZoneBackgroundTile.verify(message.tile);if(error)return`tile.`+error}}return null},ZoneBackground.fromObject=function(object){if(object instanceof $root.pb.ZoneBackground)return object;let message=new $root.pb.ZoneBackground;if(object.index!=null&&(message.index=object.index>>>0),object.path!=null&&(message.path=String(object.path)),object.tile!=null){if(typeof object.tile!=`object`)throw TypeError(`.pb.ZoneBackground.tile: object expected`);message.tile=$root.pb.ZoneBackgroundTile.fromObject(object.tile)}return message},ZoneBackground.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.index=0,object.path=``),message.index!=null&&message.hasOwnProperty(`index`)&&(object.index=message.index),message.path!=null&&message.hasOwnProperty(`path`)&&(object.path=message.path),message.tile!=null&&message.hasOwnProperty(`tile`)&&(object.tile=$root.pb.ZoneBackgroundTile.toObject(message.tile,options),options.oneofs&&(object.type=`tile`)),object},ZoneBackground.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},ZoneBackground.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.ZoneBackground`},ZoneBackground})(),pb$1.Zone=(function(){function Zone(properties){if(this.trigger=[],this.mob=[],this.background=[],properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Zone.prototype.name=0,Zone.prototype.map=0,Zone.prototype.trigger=$util.emptyArray,Zone.prototype.mob=$util.emptyArray,Zone.prototype.background=$util.emptyArray,Zone.create=function(properties){return new Zone(properties)},Zone.encode=function(message,writer){if(writer||=$Writer.create(),message.name!=null&&Object.hasOwnProperty.call(message,`name`)&&writer.uint32(8).int32(message.name),message.map!=null&&Object.hasOwnProperty.call(message,`map`)&&writer.uint32(16).int32(message.map),message.trigger!=null&&message.trigger.length)for(let i$1=0;i$1<message.trigger.length;++i$1)$root.pb.MapTrigger.encode(message.trigger[i$1],writer.uint32(26).fork()).ldelim();if(message.mob!=null&&message.mob.length)for(let i$1=0;i$1<message.mob.length;++i$1)$root.pb.MapMob.encode(message.mob[i$1],writer.uint32(34).fork()).ldelim();if(message.background!=null&&message.background.length)for(let i$1=0;i$1<message.background.length;++i$1)$root.pb.ZoneBackground.encode(message.background[i$1],writer.uint32(42).fork()).ldelim();return writer},Zone.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Zone.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Zone;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.name=reader.int32();break;case 2:message.map=reader.int32();break;case 3:message.trigger&&message.trigger.length||(message.trigger=[]),message.trigger.push($root.pb.MapTrigger.decode(reader,reader.uint32()));break;case 4:message.mob&&message.mob.length||(message.mob=[]),message.mob.push($root.pb.MapMob.decode(reader,reader.uint32()));break;case 5:message.background&&message.background.length||(message.background=[]),message.background.push($root.pb.ZoneBackground.decode(reader,reader.uint32()));break;default:reader.skipType(tag&7);break}}return message},Zone.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Zone.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.name!=null&&message.hasOwnProperty(`name`))switch(message.name){default:return`name: enum value expected`;case 0:case 2:case 3:case 4:break}if(message.map!=null&&message.hasOwnProperty(`map`))switch(message.map){default:return`map: enum value expected`;case 0:case 2:case 3:case 4:break}if(message.trigger!=null&&message.hasOwnProperty(`trigger`)){if(!Array.isArray(message.trigger))return`trigger: array expected`;for(let i$1=0;i$1<message.trigger.length;++i$1){let error=$root.pb.MapTrigger.verify(message.trigger[i$1]);if(error)return`trigger.`+error}}if(message.mob!=null&&message.hasOwnProperty(`mob`)){if(!Array.isArray(message.mob))return`mob: array expected`;for(let i$1=0;i$1<message.mob.length;++i$1){let error=$root.pb.MapMob.verify(message.mob[i$1]);if(error)return`mob.`+error}}if(message.background!=null&&message.hasOwnProperty(`background`)){if(!Array.isArray(message.background))return`background: array expected`;for(let i$1=0;i$1<message.background.length;++i$1){let error=$root.pb.ZoneBackground.verify(message.background[i$1]);if(error)return`background.`+error}}return null},Zone.fromObject=function(object){if(object instanceof $root.pb.Zone)return object;let message=new $root.pb.Zone;switch(object.name){default:if(typeof object.name==`number`){message.name=object.name;break}break;case`unknown`:case 0:message.name=0;break;case`zone2`:case 2:message.name=2;break;case`zone3`:case 3:message.name=3;break;case`zoneWell`:case 4:message.name=4;break}switch(object.map){default:if(typeof object.map==`number`){message.map=object.map;break}break;case`unknown`:case 0:message.map=0;break;case`map2`:case 2:message.map=2;break;case`map3`:case 3:message.map=3;break;case`mapWell`:case 4:message.map=4;break}if(object.trigger){if(!Array.isArray(object.trigger))throw TypeError(`.pb.Zone.trigger: array expected`);message.trigger=[];for(let i$1=0;i$1<object.trigger.length;++i$1){if(typeof object.trigger[i$1]!=`object`)throw TypeError(`.pb.Zone.trigger: object expected`);message.trigger[i$1]=$root.pb.MapTrigger.fromObject(object.trigger[i$1])}}if(object.mob){if(!Array.isArray(object.mob))throw TypeError(`.pb.Zone.mob: array expected`);message.mob=[];for(let i$1=0;i$1<object.mob.length;++i$1){if(typeof object.mob[i$1]!=`object`)throw TypeError(`.pb.Zone.mob: object expected`);message.mob[i$1]=$root.pb.MapMob.fromObject(object.mob[i$1])}}if(object.background){if(!Array.isArray(object.background))throw TypeError(`.pb.Zone.background: array expected`);message.background=[];for(let i$1=0;i$1<object.background.length;++i$1){if(typeof object.background[i$1]!=`object`)throw TypeError(`.pb.Zone.background: object expected`);message.background[i$1]=$root.pb.ZoneBackground.fromObject(object.background[i$1])}}return message},Zone.toObject=function(message,options){options||={};let object={};if((options.arrays||options.defaults)&&(object.trigger=[],object.mob=[],object.background=[]),options.defaults&&(object.name=options.enums===String?`unknown`:0,object.map=options.enums===String?`unknown`:0),message.name!=null&&message.hasOwnProperty(`name`)&&(object.name=options.enums===String?$root.pb.Zone.Name[message.name]===void 0?message.name:$root.pb.Zone.Name[message.name]:message.name),message.map!=null&&message.hasOwnProperty(`map`)&&(object.map=options.enums===String?$root.pb.Map.Name[message.map]===void 0?message.map:$root.pb.Map.Name[message.map]:message.map),message.trigger&&message.trigger.length){object.trigger=[];for(let j=0;j<message.trigger.length;++j)object.trigger[j]=$root.pb.MapTrigger.toObject(message.trigger[j],options)}if(message.mob&&message.mob.length){object.mob=[];for(let j=0;j<message.mob.length;++j)object.mob[j]=$root.pb.MapMob.toObject(message.mob[j],options)}if(message.background&&message.background.length){object.background=[];for(let j=0;j<message.background.length;++j)object.background[j]=$root.pb.ZoneBackground.toObject(message.background[j],options)}return object},Zone.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Zone.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Zone`},Zone.Name=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknown`]=0,values[valuesById[2]=`zone2`]=2,values[valuesById[3]=`zone3`]=3,values[valuesById[4]=`zoneWell`]=4,values})(),Zone})(),pb$1.Mob=(function(){function Mob(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Mob.prototype.type=0,Mob.prototype.sprite=0,Mob.prototype.movement=0,Mob.create=function(properties){return new Mob(properties)},Mob.encode=function(message,writer){return writer||=$Writer.create(),message.type!=null&&Object.hasOwnProperty.call(message,`type`)&&writer.uint32(8).int32(message.type),message.movement!=null&&Object.hasOwnProperty.call(message,`movement`)&&writer.uint32(16).int32(message.movement),message.sprite!=null&&Object.hasOwnProperty.call(message,`sprite`)&&writer.uint32(24).int32(message.sprite),writer},Mob.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Mob.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Mob;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.type=reader.int32();break;case 3:message.sprite=reader.int32();break;case 2:message.movement=reader.int32();break;default:reader.skipType(tag&7);break}}return message},Mob.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Mob.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.type!=null&&message.hasOwnProperty(`type`))switch(message.type){default:return`type: enum value expected`;case 0:case 1:case 2:break}if(message.sprite!=null&&message.hasOwnProperty(`sprite`))switch(message.sprite){default:return`sprite: enum value expected`;case 0:case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 2001:case 2002:case 2003:break}if(message.movement!=null&&message.hasOwnProperty(`movement`))switch(message.movement){default:return`movement: enum value expected`;case 0:case 1:case 2:case 4:break}return null},Mob.fromObject=function(object){if(object instanceof $root.pb.Mob)return object;let message=new $root.pb.Mob;switch(object.type){default:if(typeof object.type==`number`){message.type=object.type;break}break;case`unknownMob`:case 0:message.type=0;break;case`dog`:case 1:message.type=1;break;case`bird`:case 2:message.type=2;break}switch(object.sprite){default:if(typeof object.sprite==`number`){message.sprite=object.sprite;break}break;case`unknown`:case 0:message.sprite=0;break;case`birdA`:case 1001:message.sprite=1001;break;case`birdB`:case 1002:message.sprite=1002;break;case`dogA`:case 1003:message.sprite=1003;break;case`dogB`:case 1004:message.sprite=1004;break;case`catA`:case 1005:message.sprite=1005;break;case`catB`:case 1006:message.sprite=1006;break;case`ratA`:case 1007:message.sprite=1007;break;case`ratB`:case 1008:message.sprite=1008;break;case`fighter`:case 2001:message.sprite=2001;break;case`samurai`:case 2002:message.sprite=2002;break;case`shinobi`:case 2003:message.sprite=2003;break}switch(object.movement){default:if(typeof object.movement==`number`){message.movement=object.movement;break}break;case`unknownMovement`:case 0:message.movement=0;break;case`grounded`:case 1:message.movement=1;break;case`aerial`:case 2:message.movement=2;break;case`climbing`:case 4:message.movement=4;break}return message},Mob.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.type=options.enums===String?`unknownMob`:0,object.movement=options.enums===String?`unknownMovement`:0,object.sprite=options.enums===String?`unknown`:0),message.type!=null&&message.hasOwnProperty(`type`)&&(object.type=options.enums===String?$root.pb.Mob.Type[message.type]===void 0?message.type:$root.pb.Mob.Type[message.type]:message.type),message.movement!=null&&message.hasOwnProperty(`movement`)&&(object.movement=options.enums===String?$root.pb.Mob.Movement[message.movement]===void 0?message.movement:$root.pb.Mob.Movement[message.movement]:message.movement),message.sprite!=null&&message.hasOwnProperty(`sprite`)&&(object.sprite=options.enums===String?$root.pb.SpriteBox.Name[message.sprite]===void 0?message.sprite:$root.pb.SpriteBox.Name[message.sprite]:message.sprite),object},Mob.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Mob.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Mob`},Mob.Type=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknownMob`]=0,values[valuesById[1]=`dog`]=1,values[valuesById[2]=`bird`]=2,values})(),Mob.Movement=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknownMovement`]=0,values[valuesById[1]=`grounded`]=1,values[valuesById[2]=`aerial`]=2,values[valuesById[4]=`climbing`]=4,values})(),Mob})(),pb$1.Sprite=(function(){function Sprite(properties){if(this.step=[],properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Sprite.prototype.pose=0,Sprite.prototype.path=``,Sprite.prototype.step=$util.emptyArray,Sprite.create=function(properties){return new Sprite(properties)},Sprite.encode=function(message,writer){if(writer||=$Writer.create(),message.pose!=null&&Object.hasOwnProperty.call(message,`pose`)&&writer.uint32(8).int32(message.pose),message.path!=null&&Object.hasOwnProperty.call(message,`path`)&&writer.uint32(18).string(message.path),message.step!=null&&message.step.length){writer.uint32(26).fork();for(let i$1=0;i$1<message.step.length;++i$1)writer.uint32(message.step[i$1]);writer.ldelim()}return writer},Sprite.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Sprite.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Sprite;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.pose=reader.int32();break;case 2:message.path=reader.string();break;case 3:if(message.step&&message.step.length||(message.step=[]),(tag&7)==2){let end2=reader.uint32()+reader.pos;for(;reader.pos<end2;)message.step.push(reader.uint32())}else message.step.push(reader.uint32());break;default:reader.skipType(tag&7);break}}return message},Sprite.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Sprite.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.pose!=null&&message.hasOwnProperty(`pose`))switch(message.pose){default:return`pose: enum value expected`;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:break}if(message.path!=null&&message.hasOwnProperty(`path`)&&!$util.isString(message.path))return`path: string expected`;if(message.step!=null&&message.hasOwnProperty(`step`)){if(!Array.isArray(message.step))return`step: array expected`;for(let i$1=0;i$1<message.step.length;++i$1)if(!$util.isInteger(message.step[i$1]))return`step: integer[] expected`}return null},Sprite.fromObject=function(object){if(object instanceof $root.pb.Sprite)return object;let message=new $root.pb.Sprite;switch(object.pose){default:if(typeof object.pose==`number`){message.pose=object.pose;break}break;case`unknown`:case 0:message.pose=0;break;case`walk`:case 1:message.pose=1;break;case`run`:case 2:message.pose=2;break;case`attack`:case 3:message.pose=3;break;case`attack2`:case 4:message.pose=4;break;case`attack3`:case 5:message.pose=5;break;case`jump`:case 6:message.pose=6;break;case`idle`:case 7:message.pose=7;break;case`shield`:case 8:message.pose=8;break;case`dead`:case 9:message.pose=9;break;case`hurt`:case 10:message.pose=10;break}if(object.path!=null&&(message.path=String(object.path)),object.step){if(!Array.isArray(object.step))throw TypeError(`.pb.Sprite.step: array expected`);message.step=[];for(let i$1=0;i$1<object.step.length;++i$1)message.step[i$1]=object.step[i$1]>>>0}return message},Sprite.toObject=function(message,options){options||={};let object={};if((options.arrays||options.defaults)&&(object.step=[]),options.defaults&&(object.pose=options.enums===String?`unknown`:0,object.path=``),message.pose!=null&&message.hasOwnProperty(`pose`)&&(object.pose=options.enums===String?$root.pb.Pose.Type[message.pose]===void 0?message.pose:$root.pb.Pose.Type[message.pose]:message.pose),message.path!=null&&message.hasOwnProperty(`path`)&&(object.path=message.path),message.step&&message.step.length){object.step=[];for(let j=0;j<message.step.length;++j)object.step[j]=message.step[j]}return object},Sprite.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Sprite.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Sprite`},Sprite})(),pb$1.SpriteBox=(function(){function SpriteBox(properties){if(this.sprite=[],properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return SpriteBox.prototype.name=0,SpriteBox.prototype.physics=null,SpriteBox.prototype.visual=null,SpriteBox.prototype.sprite=$util.emptyArray,SpriteBox.create=function(properties){return new SpriteBox(properties)},SpriteBox.encode=function(message,writer){if(writer||=$Writer.create(),message.name!=null&&Object.hasOwnProperty.call(message,`name`)&&writer.uint32(8).int32(message.name),message.physics!=null&&Object.hasOwnProperty.call(message,`physics`)&&$root.pb.Size.encode(message.physics,writer.uint32(18).fork()).ldelim(),message.visual!=null&&Object.hasOwnProperty.call(message,`visual`)&&$root.pb.VisualSize.encode(message.visual,writer.uint32(34).fork()).ldelim(),message.sprite!=null&&message.sprite.length)for(let i$1=0;i$1<message.sprite.length;++i$1)$root.pb.Sprite.encode(message.sprite[i$1],writer.uint32(50).fork()).ldelim();return writer},SpriteBox.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},SpriteBox.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.SpriteBox;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.name=reader.int32();break;case 2:message.physics=$root.pb.Size.decode(reader,reader.uint32());break;case 4:message.visual=$root.pb.VisualSize.decode(reader,reader.uint32());break;case 6:message.sprite&&message.sprite.length||(message.sprite=[]),message.sprite.push($root.pb.Sprite.decode(reader,reader.uint32()));break;default:reader.skipType(tag&7);break}}return message},SpriteBox.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SpriteBox.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.name!=null&&message.hasOwnProperty(`name`))switch(message.name){default:return`name: enum value expected`;case 0:case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 2001:case 2002:case 2003:break}if(message.physics!=null&&message.hasOwnProperty(`physics`)){let error=$root.pb.Size.verify(message.physics);if(error)return`physics.`+error}if(message.visual!=null&&message.hasOwnProperty(`visual`)){let error=$root.pb.VisualSize.verify(message.visual);if(error)return`visual.`+error}if(message.sprite!=null&&message.hasOwnProperty(`sprite`)){if(!Array.isArray(message.sprite))return`sprite: array expected`;for(let i$1=0;i$1<message.sprite.length;++i$1){let error=$root.pb.Sprite.verify(message.sprite[i$1]);if(error)return`sprite.`+error}}return null},SpriteBox.fromObject=function(object){if(object instanceof $root.pb.SpriteBox)return object;let message=new $root.pb.SpriteBox;switch(object.name){default:if(typeof object.name==`number`){message.name=object.name;break}break;case`unknown`:case 0:message.name=0;break;case`birdA`:case 1001:message.name=1001;break;case`birdB`:case 1002:message.name=1002;break;case`dogA`:case 1003:message.name=1003;break;case`dogB`:case 1004:message.name=1004;break;case`catA`:case 1005:message.name=1005;break;case`catB`:case 1006:message.name=1006;break;case`ratA`:case 1007:message.name=1007;break;case`ratB`:case 1008:message.name=1008;break;case`fighter`:case 2001:message.name=2001;break;case`samurai`:case 2002:message.name=2002;break;case`shinobi`:case 2003:message.name=2003;break}if(object.physics!=null){if(typeof object.physics!=`object`)throw TypeError(`.pb.SpriteBox.physics: object expected`);message.physics=$root.pb.Size.fromObject(object.physics)}if(object.visual!=null){if(typeof object.visual!=`object`)throw TypeError(`.pb.SpriteBox.visual: object expected`);message.visual=$root.pb.VisualSize.fromObject(object.visual)}if(object.sprite){if(!Array.isArray(object.sprite))throw TypeError(`.pb.SpriteBox.sprite: array expected`);message.sprite=[];for(let i$1=0;i$1<object.sprite.length;++i$1){if(typeof object.sprite[i$1]!=`object`)throw TypeError(`.pb.SpriteBox.sprite: object expected`);message.sprite[i$1]=$root.pb.Sprite.fromObject(object.sprite[i$1])}}return message},SpriteBox.toObject=function(message,options){options||={};let object={};if((options.arrays||options.defaults)&&(object.sprite=[]),options.defaults&&(object.name=options.enums===String?`unknown`:0,object.physics=null,object.visual=null),message.name!=null&&message.hasOwnProperty(`name`)&&(object.name=options.enums===String?$root.pb.SpriteBox.Name[message.name]===void 0?message.name:$root.pb.SpriteBox.Name[message.name]:message.name),message.physics!=null&&message.hasOwnProperty(`physics`)&&(object.physics=$root.pb.Size.toObject(message.physics,options)),message.visual!=null&&message.hasOwnProperty(`visual`)&&(object.visual=$root.pb.VisualSize.toObject(message.visual,options)),message.sprite&&message.sprite.length){object.sprite=[];for(let j=0;j<message.sprite.length;++j)object.sprite[j]=$root.pb.Sprite.toObject(message.sprite[j],options)}return object},SpriteBox.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},SpriteBox.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.SpriteBox`},SpriteBox.Name=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknown`]=0,values[valuesById[1001]=`birdA`]=1001,values[valuesById[1002]=`birdB`]=1002,values[valuesById[1003]=`dogA`]=1003,values[valuesById[1004]=`dogB`]=1004,values[valuesById[1005]=`catA`]=1005,values[valuesById[1006]=`catB`]=1006,values[valuesById[1007]=`ratA`]=1007,values[valuesById[1008]=`ratB`]=1008,values[valuesById[2001]=`fighter`]=2001,values[valuesById[2002]=`samurai`]=2002,values[valuesById[2003]=`shinobi`]=2003,values})(),SpriteBox})(),pb$1.Pose=(function(){function Pose(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Pose.create=function(properties){return new Pose(properties)},Pose.encode=function(message,writer){return writer||=$Writer.create(),writer},Pose.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Pose.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Pose;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){default:reader.skipType(tag&7);break}}return message},Pose.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Pose.verify=function(message){return typeof message!=`object`||!message?`object expected`:null},Pose.fromObject=function(object){return object instanceof $root.pb.Pose?object:new $root.pb.Pose},Pose.toObject=function(){return{}},Pose.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Pose.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Pose`},Pose.Type=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknown`]=0,values[valuesById[1]=`walk`]=1,values[valuesById[2]=`run`]=2,values[valuesById[3]=`attack`]=3,values[valuesById[4]=`attack2`]=4,values[valuesById[5]=`attack3`]=5,values[valuesById[6]=`jump`]=6,values[valuesById[7]=`idle`]=7,values[valuesById[8]=`shield`]=8,values[valuesById[9]=`dead`]=9,values[valuesById[10]=`hurt`]=10,values})(),Pose})(),pb$1.Behavior=(function(){function Behavior(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Behavior.create=function(properties){return new Behavior(properties)},Behavior.encode=function(message,writer){return writer||=$Writer.create(),writer},Behavior.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Behavior.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Behavior;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){default:reader.skipType(tag&7);break}}return message},Behavior.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Behavior.verify=function(message){return typeof message!=`object`||!message?`object expected`:null},Behavior.fromObject=function(object){return object instanceof $root.pb.Behavior?object:new $root.pb.Behavior},Behavior.toObject=function(){return{}},Behavior.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Behavior.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Behavior`},Behavior.Idle=(function(){let valuesById={},values=Object.create(valuesById);return values[valuesById[0]=`unknownIdle`]=0,values[valuesById[1]=`stand`]=1,values[valuesById[2]=`wander`]=2,values[valuesById[3]=`patrol`]=3,values})(),Behavior})(),pb$1.Mind=(function(){function Mind(properties){if(properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return Mind.prototype.idle=0,Mind.create=function(properties){return new Mind(properties)},Mind.encode=function(message,writer){return writer||=$Writer.create(),message.idle!=null&&Object.hasOwnProperty.call(message,`idle`)&&writer.uint32(8).int32(message.idle),writer},Mind.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},Mind.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.Mind;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.idle=reader.int32();break;default:reader.skipType(tag&7);break}}return message},Mind.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},Mind.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.idle!=null&&message.hasOwnProperty(`idle`))switch(message.idle){default:return`idle: enum value expected`;case 0:case 1:case 2:case 3:break}return null},Mind.fromObject=function(object){if(object instanceof $root.pb.Mind)return object;let message=new $root.pb.Mind;switch(object.idle){default:if(typeof object.idle==`number`){message.idle=object.idle;break}break;case`unknownIdle`:case 0:message.idle=0;break;case`stand`:case 1:message.idle=1;break;case`wander`:case 2:message.idle=2;break;case`patrol`:case 3:message.idle=3;break}return message},Mind.toObject=function(message,options){options||={};let object={};return options.defaults&&(object.idle=options.enums===String?`unknownIdle`:0),message.idle!=null&&message.hasOwnProperty(`idle`)&&(object.idle=options.enums===String?$root.pb.Behavior.Idle[message.idle]===void 0?message.idle:$root.pb.Behavior.Idle[message.idle]:message.idle),object},Mind.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},Mind.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.Mind`},Mind})(),pb$1.AssetManifest=(function(){function AssetManifest(properties){if(this.character=[],this.animal=[],this.tileset=[],this.mob=[],this.map=[],this.zone=[],properties)for(let keys=Object.keys(properties),i$1=0;i$1<keys.length;++i$1)properties[keys[i$1]]!=null&&(this[keys[i$1]]=properties[keys[i$1]])}return AssetManifest.prototype.config=null,AssetManifest.prototype.character=$util.emptyArray,AssetManifest.prototype.animal=$util.emptyArray,AssetManifest.prototype.tileset=$util.emptyArray,AssetManifest.prototype.mob=$util.emptyArray,AssetManifest.prototype.map=$util.emptyArray,AssetManifest.prototype.zone=$util.emptyArray,AssetManifest.create=function(properties){return new AssetManifest(properties)},AssetManifest.encode=function(message,writer){if(writer||=$Writer.create(),message.config!=null&&Object.hasOwnProperty.call(message,`config`)&&$root.pb.Config.encode(message.config,writer.uint32(10).fork()).ldelim(),message.character!=null&&message.character.length)for(let i$1=0;i$1<message.character.length;++i$1)$root.pb.SpriteBox.encode(message.character[i$1],writer.uint32(18).fork()).ldelim();if(message.animal!=null&&message.animal.length)for(let i$1=0;i$1<message.animal.length;++i$1)$root.pb.SpriteBox.encode(message.animal[i$1],writer.uint32(26).fork()).ldelim();if(message.tileset!=null&&message.tileset.length)for(let i$1=0;i$1<message.tileset.length;++i$1)$root.pb.Tileset.encode(message.tileset[i$1],writer.uint32(34).fork()).ldelim();if(message.mob!=null&&message.mob.length)for(let i$1=0;i$1<message.mob.length;++i$1)$root.pb.Mob.encode(message.mob[i$1],writer.uint32(42).fork()).ldelim();if(message.map!=null&&message.map.length)for(let i$1=0;i$1<message.map.length;++i$1)$root.pb.Map.encode(message.map[i$1],writer.uint32(50).fork()).ldelim();if(message.zone!=null&&message.zone.length)for(let i$1=0;i$1<message.zone.length;++i$1)$root.pb.Zone.encode(message.zone[i$1],writer.uint32(58).fork()).ldelim();return writer},AssetManifest.encodeDelimited=function(message,writer){return this.encode(message,writer).ldelim()},AssetManifest.decode=function(reader,length,error){reader instanceof $Reader||(reader=$Reader.create(reader));let end=length===void 0?reader.len:reader.pos+length,message=new $root.pb.AssetManifest;for(;reader.pos<end;){let tag=reader.uint32();if(tag===error)break;switch(tag>>>3){case 1:message.config=$root.pb.Config.decode(reader,reader.uint32());break;case 2:message.character&&message.character.length||(message.character=[]),message.character.push($root.pb.SpriteBox.decode(reader,reader.uint32()));break;case 3:message.animal&&message.animal.length||(message.animal=[]),message.animal.push($root.pb.SpriteBox.decode(reader,reader.uint32()));break;case 4:message.tileset&&message.tileset.length||(message.tileset=[]),message.tileset.push($root.pb.Tileset.decode(reader,reader.uint32()));break;case 5:message.mob&&message.mob.length||(message.mob=[]),message.mob.push($root.pb.Mob.decode(reader,reader.uint32()));break;case 6:message.map&&message.map.length||(message.map=[]),message.map.push($root.pb.Map.decode(reader,reader.uint32()));break;case 7:message.zone&&message.zone.length||(message.zone=[]),message.zone.push($root.pb.Zone.decode(reader,reader.uint32()));break;default:reader.skipType(tag&7);break}}return message},AssetManifest.decodeDelimited=function(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},AssetManifest.verify=function(message){if(typeof message!=`object`||!message)return`object expected`;if(message.config!=null&&message.hasOwnProperty(`config`)){let error=$root.pb.Config.verify(message.config);if(error)return`config.`+error}if(message.character!=null&&message.hasOwnProperty(`character`)){if(!Array.isArray(message.character))return`character: array expected`;for(let i$1=0;i$1<message.character.length;++i$1){let error=$root.pb.SpriteBox.verify(message.character[i$1]);if(error)return`character.`+error}}if(message.animal!=null&&message.hasOwnProperty(`animal`)){if(!Array.isArray(message.animal))return`animal: array expected`;for(let i$1=0;i$1<message.animal.length;++i$1){let error=$root.pb.SpriteBox.verify(message.animal[i$1]);if(error)return`animal.`+error}}if(message.tileset!=null&&message.hasOwnProperty(`tileset`)){if(!Array.isArray(message.tileset))return`tileset: array expected`;for(let i$1=0;i$1<message.tileset.length;++i$1){let error=$root.pb.Tileset.verify(message.tileset[i$1]);if(error)return`tileset.`+error}}if(message.mob!=null&&message.hasOwnProperty(`mob`)){if(!Array.isArray(message.mob))return`mob: array expected`;for(let i$1=0;i$1<message.mob.length;++i$1){let error=$root.pb.Mob.verify(message.mob[i$1]);if(error)return`mob.`+error}}if(message.map!=null&&message.hasOwnProperty(`map`)){if(!Array.isArray(message.map))return`map: array expected`;for(let i$1=0;i$1<message.map.length;++i$1){let error=$root.pb.Map.verify(message.map[i$1]);if(error)return`map.`+error}}if(message.zone!=null&&message.hasOwnProperty(`zone`)){if(!Array.isArray(message.zone))return`zone: array expected`;for(let i$1=0;i$1<message.zone.length;++i$1){let error=$root.pb.Zone.verify(message.zone[i$1]);if(error)return`zone.`+error}}return null},AssetManifest.fromObject=function(object){if(object instanceof $root.pb.AssetManifest)return object;let message=new $root.pb.AssetManifest;if(object.config!=null){if(typeof object.config!=`object`)throw TypeError(`.pb.AssetManifest.config: object expected`);message.config=$root.pb.Config.fromObject(object.config)}if(object.character){if(!Array.isArray(object.character))throw TypeError(`.pb.AssetManifest.character: array expected`);message.character=[];for(let i$1=0;i$1<object.character.length;++i$1){if(typeof object.character[i$1]!=`object`)throw TypeError(`.pb.AssetManifest.character: object expected`);message.character[i$1]=$root.pb.SpriteBox.fromObject(object.character[i$1])}}if(object.animal){if(!Array.isArray(object.animal))throw TypeError(`.pb.AssetManifest.animal: array expected`);message.animal=[];for(let i$1=0;i$1<object.animal.length;++i$1){if(typeof object.animal[i$1]!=`object`)throw TypeError(`.pb.AssetManifest.animal: object expected`);message.animal[i$1]=$root.pb.SpriteBox.fromObject(object.animal[i$1])}}if(object.tileset){if(!Array.isArray(object.tileset))throw TypeError(`.pb.AssetManifest.tileset: array expected`);message.tileset=[];for(let i$1=0;i$1<object.tileset.length;++i$1){if(typeof object.tileset[i$1]!=`object`)throw TypeError(`.pb.AssetManifest.tileset: object expected`);message.tileset[i$1]=$root.pb.Tileset.fromObject(object.tileset[i$1])}}if(object.mob){if(!Array.isArray(object.mob))throw TypeError(`.pb.AssetManifest.mob: array expected`);message.mob=[];for(let i$1=0;i$1<object.mob.length;++i$1){if(typeof object.mob[i$1]!=`object`)throw TypeError(`.pb.AssetManifest.mob: object expected`);message.mob[i$1]=$root.pb.Mob.fromObject(object.mob[i$1])}}if(object.map){if(!Array.isArray(object.map))throw TypeError(`.pb.AssetManifest.map: array expected`);message.map=[];for(let i$1=0;i$1<object.map.length;++i$1){if(typeof object.map[i$1]!=`object`)throw TypeError(`.pb.AssetManifest.map: object expected`);message.map[i$1]=$root.pb.Map.fromObject(object.map[i$1])}}if(object.zone){if(!Array.isArray(object.zone))throw TypeError(`.pb.AssetManifest.zone: array expected`);message.zone=[];for(let i$1=0;i$1<object.zone.length;++i$1){if(typeof object.zone[i$1]!=`object`)throw TypeError(`.pb.AssetManifest.zone: object expected`);message.zone[i$1]=$root.pb.Zone.fromObject(object.zone[i$1])}}return message},AssetManifest.toObject=function(message,options){options||={};let object={};if((options.arrays||options.defaults)&&(object.character=[],object.animal=[],object.tileset=[],object.mob=[],object.map=[],object.zone=[]),options.defaults&&(object.config=null),message.config!=null&&message.hasOwnProperty(`config`)&&(object.config=$root.pb.Config.toObject(message.config,options)),message.character&&message.character.length){object.character=[];for(let j=0;j<message.character.length;++j)object.character[j]=$root.pb.SpriteBox.toObject(message.character[j],options)}if(message.animal&&message.animal.length){object.animal=[];for(let j=0;j<message.animal.length;++j)object.animal[j]=$root.pb.SpriteBox.toObject(message.animal[j],options)}if(message.tileset&&message.tileset.length){object.tileset=[];for(let j=0;j<message.tileset.length;++j)object.tileset[j]=$root.pb.Tileset.toObject(message.tileset[j],options)}if(message.mob&&message.mob.length){object.mob=[];for(let j=0;j<message.mob.length;++j)object.mob[j]=$root.pb.Mob.toObject(message.mob[j],options)}if(message.map&&message.map.length){object.map=[];for(let j=0;j<message.map.length;++j)object.map[j]=$root.pb.Map.toObject(message.map[j],options)}if(message.zone&&message.zone.length){object.zone=[];for(let j=0;j<message.zone.length;++j)object.zone[j]=$root.pb.Zone.toObject(message.zone[j],options)}return object},AssetManifest.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.util.toJSONOptions)},AssetManifest.getTypeUrl=function(typeUrlPrefix){return typeUrlPrefix===void 0&&(typeUrlPrefix=`type.googleapis.com`),typeUrlPrefix+`/pb.AssetManifest`},AssetManifest})(),pb$1})();async function loadAsset(){let re={};try{re=await(await fetch(`asset/manifest.json`)).json()}catch{}return pb.AssetManifest.fromObject(re)}const tilePool=new Map;function getImageSize(url){return new Promise((resolve,reject)=>{let img=new Image;img.onload=()=>resolve({w:img.width,h:img.height}),img.onerror=reject,img.src=url})}async function tilesetInit(li){for(let t of li.map(t$1=>pb.Tileset.create(t$1))){let s=tilePool.get(t.name);s||(s={name:t.name,url:`asset/${t.path}`,w:0,h:0,sizeW:0,sizeH:0,list:[{id:0,pos:``,w:0,h:0}]},tilePool.set(t.name,s));let{w:sw,h:sh}=pb.Size.fromObject(t.size||{w:32,h:32});({w:s.w,h:s.h}=await getImageSize(s.url));let id=0;for(let y=0;y<s.h;y+=sh)for(let x=0;x<s.w;x+=sw)id++,s.list.push({id,pos:`-${x}px -${y}px`,w:sw,h:sh})}}async function setTileBg(name,id,e){let s=tilePool.get(name);if(!s){console.warn(`unknown tileset ${name}`);return}let t=s.list[id];if(!t){console.warn(`unknown tile ${name}.${id}`);return}e.style.backgroundImage=`url("${s.url}")`,e.style.backgroundPosition=t.pos}async function tilesetComponent(){let o=htmlNew(`div`,`tileset`);for(let[k,s]of tilePool){let box=htmlNew(`div`);box.style.width=`${s.w+2*(s.w/s.list[1].w)}px`,box.style.height=`${s.h+2*(s.h/s.list[1].h)}px`;for(let t of s.list){if(!t.id)continue;let et=htmlNew(`div`,`tile`);et.style.width=`${t.w}px`,et.style.height=`${t.h}px`,et.style.backgroundImage=`url("${s.url}")`,et.style.backgroundPosition=t.pos,box.appendChild(et),et.dataset.id=t.id.toString(),et.dataset.name=k.toString()}o.appendChild(box)}return o}var cellSize=32;let mapPool=pb.Map.fromObject({});const mapInit=async m=>{let d=pb.Map.fromObject(m),p={};for(let c of d.terrain)c?.tile&&(p[c?.id||0]=pb.MapCell.fromObject(c));mapPool=pb.Map.fromObject(m),mapPool.terrain.length=0;for(let y=d.h-1;y>=0;y--)for(let x=0;x<d.w;x++){let id=y*d.w+x;mapPool.terrain.push(p[id]||pb.MapCell.fromObject({id}))}console.log(`mapPool`,d.name,mapPool)},dumpMapTerrain=()=>{let pool$1=pb.Map.fromObject(mapPool.toJSON());return pool$1.terrain=pool$1.terrain.filter(c=>c?.tile),JSON.stringify(pool$1.terrain)};var createTile=p=>{let m=mapPool,et=htmlNew(`div`),id=p?.id||0;et.title=`id: ${id}, x: ${id%m.w}, y: ${Math.floor(id/m.w)}`;let tilePut=e=>{let name=e.detail.name|0,id$1=e.detail.id|0;et.dataset.name=name.toString(),et.dataset.id=id$1.toString(),setTileBg(name,id$1,et),p.tile=pb.MapCellTile.fromObject({name,id:id$1})};if(et.addEventListener(`contextmenu`,e=>(Object.keys(et.dataset).forEach(k=>delete et.dataset[k]),et.style.backgroundImage=``,p.tile=null,e.preventDefault(),e.stopPropagation(),!1)),et.addEventListener(`tilePut`,tilePut),p.tile){let tile=pb.MapCellTile.fromObject(p.tile);tilePut(new CustomEvent(`tilePut`,{detail:{name:tile.name,id:tile.id}}))}return et};const mapComponent=()=>{let m=mapPool,o=htmlNew(`div`,`map`);o.style.width=`${(cellSize+2)*m.w}px`,o.style.height=`${(cellSize+2)*m.h}px`;for(let p of mapPool.terrain)o.appendChild(createTile(p));return o};var download=(content,filename,contentType=`application/json`)=>{let blob=new Blob([content],{type:contentType}),url=URL.createObjectURL(blob),a=htmlNew(`a`);a.href=url,a.download=filename,a.click(),URL.revokeObjectURL(url)};function opComponent(ml,mapCb){let o=htmlNew(`div`,`op`),dl=htmlNew(`button`,`download`);dl.textContent=`Download Terrain`,dl.onclick=()=>{download(dumpMapTerrain(),`terrain.json`)},o.appendChild(dl);let select=htmlNew(`select`);return ml.forEach((v,i$1)=>{let option=htmlNew(`option`);option.value=``+i$1,i$1===0&&(option.selected=!0),option.textContent=`${pb.Map.Name[v.name]}`,select.appendChild(option)}),select.onchange=()=>{mapCb(parseInt(select.value,10))},o.appendChild(select),mapCb(0),o}const bindHotKey=panel=>{window.addEventListener(`keydown`,e=>{let target=e.target;if(!target)return;let tag=target.tagName;tag===`INPUT`||tag===`TEXTAREA`||target.isContentEditable||e.key.toLowerCase()===`f`&&(e.preventDefault(),panel.classList.toggle(`hidden`))})};var ghost=null,currentHover=null;function updateGhostPos(e){ghost&&(ghost.style.left=`${e.clientX}px`,ghost.style.top=`${e.clientY}px`)}const setAllDrag=(selector,targetSelector=`.map > div`)=>{let getDropTarget=(x,y)=>{let el=document.elementFromPoint(x,y);return el?el.closest(targetSelector):null},pointerMove=ev=>{updateGhostPos(ev);let target=getDropTarget(ev.clientX,ev.clientY);target!==currentHover&&(currentHover?.classList.remove(`hover`),target?.classList.add(`hover`),currentHover=target)};document.querySelectorAll(selector).forEach(el=>{el.addEventListener(`pointerdown`,ev=>{let d=el.dataset;ghost=el.cloneNode(!0),ghost.style.opacity=`0.5`,ghost.style.position=`fixed`,ghost.style.pointerEvents=`none`,ghost.style.transform=`translate(-50%, -50%)`,ghost.style.zIndex=`9999`,document.body.appendChild(ghost),updateGhostPos(ev),el.setPointerCapture(ev.pointerId);let pointerUp=ev$1=>{el.releasePointerCapture(ev$1.pointerId),el.removeEventListener(`pointermove`,pointerMove),el.removeEventListener(`pointerup`,pointerUp),currentHover&&=(currentHover.dispatchEvent(new CustomEvent(`tilePut`,{detail:{name:d.name,id:d.id}})),currentHover.classList.remove(`hover`),null),ghost?.remove(),ghost=null};el.addEventListener(`pointermove`,pointerMove),el.addEventListener(`pointerup`,pointerUp)})})};(async()=>{let app=document.getElementById(`app`);if(!app)return;let a=await loadAsset();console.log(`asset manifest`,a);let box=htmlNew(`div`,`map-box`);app.appendChild(box),await tilesetInit(a.tileset);let panel=htmlNew(`div`,`panel`);document.body.appendChild(panel);let op=opComponent(a.map,idx=>{mapInit(a.map[idx]),box.replaceChildren(mapComponent())});panel.appendChild(op);let ht=await tilesetComponent();panel.appendChild(ht),bindHotKey(panel),setAllDrag(`.tile`)})();